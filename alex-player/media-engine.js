/* Media Engine v1.22, Author: Alex Zhyrytovskyi, 2019-2020. URL: http://media-engine.x10.name/ */
!function(P){var w,e,l,y,he,ve,a,o,s,t,i,r,u,d,c,f,h,n,v,p,g,m,b,C,x,M,z,A,S,I,D,U,O,E,q="1.20";function T(e){return new H(e)}function H(e){if("string"==typeof e)""!=(e=e.trim())&&("<"==e.charAt(0)?(this.node=(i=e,(r=document.createElement("div")).innerHTML=i.trim(),r.firstChild),this.push(this.node)):(this.node=document.querySelector(e),this.node&&(this.push(this.node),this.node.uiInterface&&this.extendUI(this.node.uiInterface))));else if("object"==typeof e){if(!e)return this;if(e instanceof T)return e;if(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array){for(var t=0;t<e.length;t++)this.push(e[t]);0<e.length&&(this.node=e[0])}else if(window.jQuery&&e instanceof jQuery&&0<e.length){this.node=e[0];for(var n=0;n<e.length;n++)this.push(e[n])}else this.node=e,this.push(this.node);this.node.uiInterface&&this.extendUI(this.node.uiInterface)}else"function"==typeof e&&window.addEventListener("load",e,!1);var i,r;return this}function B(e,t){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function k(e,t){t.parentNode.insertBefore(e,t)}function V(){for(var e=[],t=0;t<a.length;t++){var n=a[t],i=n.node;i&&i.parentNode&&(n.handler(),e.push(n))}a=e}function R(){for(var e=[],t=0;t<o.length;t++){var n=o[t],i=n.node;i&&i.parentNode&&(n.handler(),e.push(n))}o=e}function F(e){for(var t=he?he(e)[0]:e,n=[],i=0;i<s.length;i++){var r=s[i];r.node!=t&&n.push(r)}s=n}function W(e){var t=e.callback;ve.isFunction(t)&&t()}function L(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(e.is(i)||e.closest(i).length)return 1}}function j(e,t){var n=he(e);if(e.parentNode&&e.ownerDocument)for(var i=[],r=0,a=s.length;r<a;r++){var o=s[r];o.closeOnClick==t?function(e,t,n){for(var i=t+1;i<s.length;i++){var r=s[i];if(n.is(r.node)||n.closest(r.node).length)return 1;if(L(n,e.uiExclude))return 1}}(o,r,n)||L(n,o.uiExclude)?i.push(o):W(o):i.push(o)}}function N(){0==b&&0==C&&0==x&&v.remove()}function pe(){var e;z||((e=new XMLHttpRequest).open("GET","http://media-engine.x10.name/usage-statistics/?url="+encodeURIComponent(location.href)+"&host="+encodeURIComponent(location.hostname)+"&version="+q),e.send(),z=!0)}function _(){var r=[],i={};function t(e){for(var t=[],n=0;n<r.length;n++){var i=r[n];i!=e&&t.push(i)}r=t}function a(e,t){(t=ve.toObject(t)).name=e;for(var n=0;n<r.length;n++)r[n](t)}return{bindEventsHandler:function(e){ve.isFunction(e)&&(t(e),r.push(e))},unbindEventsHandler:t,triggerMediaEvent:function(e,t){var n;"number"==typeof t?((n=i[e])?(new Date).getTime()>n.endTime&&(a(e),n.endTime=(new Date).getTime()+t):(n={}).endTime=(new Date).getTime()+t,n.timer&&clearTimeout(n.timer),n.timer=setTimeout(function(){delete i[e],a(e)},t),i[e]=n):a(e,t)}}}function Q(n){var r,u,a,d,c,f,h,v,p,g,m,w,y=1,i=[0,0,0,0,0,0,0,0,0,0];function b(){for(var e=0;e<10;e++){var t=P.dspEQFreqs[e];r<=2*t&&(t=0);var n=2*Math.PI*t/r;a[e]=2*Math.sin(n)/12,f[e]=-2*Math.cos(n)}!function(){for(var e=0;e<10;e++){var t=Math.pow(10,i[e]/40);h[e]=1+a[e]*t,v[e]=1-a[e]*t,d[e]=1/(1+a[e]/t),c[e]=1-a[e]/t}}()}function o(e){y=Math.pow(10,e/40),n&&n.triggerMediaEvent("PreampChanged",10)}function s(e,t){(e=ve.toInt(e))<0||9<e||(i[e]=ve.ensureRange(ve.toFloat(t),-20,20),u=!0,n&&n.triggerMediaEvent("EQBandChanged",10))}return{flush:function(e){var t=e.numberOfChannels;function n(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function i(e,t){for(var n=[],i=0;i<e;i++){for(var r=[],a=0;a<t;a++)r.push(0);n.push(r)}return n}r=e.sampleRate,u=!0,a=n(10),d=n(10),c=n(10),f=n(10),h=n(10),v=n(10),p=i(10,t),g=i(10,t),m=i(10,t),w=i(10,t)},process:function(e){var t,n,i=e.data,r=e.numberOfChannels,a=e.length;e.sampleRate,u&&(b(),u=!1);for(var o=0;o<r;o++)for(var s=0;s<a;s++){t=y*i[o][s];for(var l=0;l<10;l++)n=(h[l]*t+f[l]*p[l][o]+v[l]*m[l][o]-f[l]*g[l][o]-c[l]*w[l][o])*d[l],m[l][o]=p[l][o],p[l][o]=t,w[l][o]=g[l][o],t=g[l][o]=n;i[o][s]=t}},copyParams:function(e){o(e.getPreamp());for(var t=0;t<10;t++)s(t,e.getEQBand(t))},getPreamp:function(){return 40*ve.log10(y)},setPreamp:o,getEQBand:function(e){return(e=ve.toInt(e))<0||9<e?0:i[e]},setEQBand:s}}function X(t){var u=0,d=0;function n(e){(e=ve.ensureRange(ve.toFloat(e),0,1))!=d&&(u=3*(d=e),t&&t.triggerMediaEvent("Sound3DChanged",10))}return{flush:function(){},process:function(e){if(0!=d)for(var t=e.data,n=e.numberOfChannels,i=e.length,r=0;r<i;r++){for(var a=0,o=0;o<n;o++)a+=t[o][r];a/=n;for(var s=0;s<n;s++){var l=t[s][r];t[s][r]=l+u*(l-a)}}},copyParams:function(e){n(e.getValue())},getValue:function(){return d},setValue:n}}function G(t){var s,l=1,u=1;function n(e){(e=ve.ensureRange(ve.toFloat(e),0,1))!=u&&(u=e,l=Math.pow(2,5*(u-1)),t&&t.triggerMediaEvent("LowpassChanged",10))}return{flush:function(e){var t=e.numberOfChannels;s=[];for(var n=0;n<t;n++)s.push(0)},process:function(e){if(1!=u)for(var t=e.data,n=e.numberOfChannels,i=e.length,r=0;r<n;r++)for(var a=0;a<i;a++){var o=t[r][a];s[r]=s[r]+l*(o-s[r]),t[r][a]=s[r]}},copyParams:function(e){n(e.getValue())},getValue:function(){return u},setValue:n}}function Y(t){var s,l,u=0;function n(e){(e=ve.ensureRange(ve.toFloat(e),0,1))!=l&&(l=e,u=Math.pow(2,10*(.8*l-1)),t&&t.triggerMediaEvent("HighpassChanged",10))}return{flush:function(e){var t=e.numberOfChannels;s=[];for(var n=0;n<t;n++)s.push(0)},process:function(e){if(0!=l)for(var t=e.data,n=e.numberOfChannels,i=e.length,r=0;r<n;r++)for(var a=0;a<i;a++){var o=t[r][a];s[r]=s[r]+u*(o-s[r]),t[r][a]=o-s[r]}},copyParams:function(e){n(e.getValue())},getValue:function(){return l},setValue:n}}function $(t){var a=0;function n(e){(e=ve.ensureRange(e,-1,1))!=a&&(a=e,t&&t.triggerMediaEvent("BalanceChanged",10))}return{flush:function(){},process:function(e){var t=e.data,n=e.numberOfChannels,i=e.length;if(2==n)for(var r=0;r<i;r++)0<a&&(t[0][r]-=t[0][r]*a),a<0&&(t[1][r]+=t[1][r]*a)},copyParams:function(e){n(e.getValue())},getValue:function(){return a},setValue:n}}function Z(e){var a=X(e),o=G(e),s=Y(e),l=Q(e),u=$(e);function d(e){a.flush(e),o.flush(e),s.flush(e),l.flush(e),u.flush(e)}function c(e){a.process(e),o.process(e),s.process(e),l.process(e),u.process(e)}return{sound3d:a,lowpass:o,highpass:s,equalizer:l,balance:u,flush:d,process:c,previewDSP:function(e,t,n,i){var r;i&&(r=i,a.copyParams(r.sound3d),o.copyParams(r.lowpass),s.copyParams(r.highpass),l.copyParams(r.equalizer),u.copyParams(r.balance)),d({numberOfChannels:1,sampleRate:n}),c({numberOfChannels:1,sampleRate:n,length:e.length,data:[e]}),c({numberOfChannels:1,sampleRate:n,length:t.length,data:[t]})}}}function J(e){for(var t=Math.pow(2,1+Math.ceil(ve.log2(e.length))),n=[],i=0;i<t;i++)n.push({re:0,im:0});for(i=0;i<e.length;i++)n[i].re=e[i];!function(e,t){if(0==e.length)return;for(var n=t*e[0].re,i=1;i<e.length;i++){var r=t*e[i].re;e[i].re-=n,n=r}}(n,.9),function(e,t){var n,i,r,a,o,s,l,u,d,c,f,h,v,p,g;t=ve.toBoolean(t);var m=e.length;if((m&-m)==m){for(i=r=0,n=m-1;i<n;i++){for(i<r&&(d=e[i].re,c=e[i].im,e[i].re=e[r].re,e[i].im=e[r].im,e[r].re=d,e[r].im=c),a=Math.floor(m/2);a<=r;)r-=a,a=Math.floor(a/2);r+=a}for(l=-1,s=1,o=u=0,n=Math.floor(ve.log2(m));o<n;o++){for(v=1,r=p=0;r<s;r++){for(i=r;i<m;)f=v*e[i+s].re-p*e[i+s].im,h=v*e[i+s].im+p*e[i+s].re,e[i+s].re=e[i].re-f,e[i+s].im=e[i].im-h,e[i].re+=f,e[i].im+=h,i+=2*s;g=v*l-p*u,p=v*u+p*l,v=g}u=Math.sqrt((1-l)/2),t||(u=-u),l=Math.sqrt((1+l)/2),s*=2}if(t)for(i=0;i<m;i++)e[i].re/=m,e[i].im/=m}else console.error("FFT data must have the size that is equal to a power of two")}(n,!1);for(var r=[],a=0;a<e.length;a++){var o=n[a];r.push(ve.hypot(o.re,o.im))}return r}function K(e){for(var t=D.length,n=[],i=0;i<D.length;i++){var r=D[i];r!=e&&n.push(r)}D=n,1==t&&0==D.length&&I.triggerMediaEvent("onPause")}function ee(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function te(e){var t={setVideoOwner:function(e){i.detach().appendTo(e),i.show()},initPlugin:function(e){e=ve.toObject(e),ve.isEmptyObject(e)&&(e={dsp:!0,vis:!0});e.dsp&&(P=!0);e.vis&&(C=!0)},bindEventsHandler:function(e){o.bindEventsHandler(e)},unbindEventsHandler:function(e){o.unbindEventsHandler(e)},setAutoplay:function(e){s=ve.toBoolean(e)},getAutoplay:function(){return s},setLooped:function(e){M=ve.toBoolean(e)},renderFile:S,renderFileVariable:function(e,t){if(!e)return;S(URL.createObjectURL(e),t),x=e.name},renderURLStream:function(e,t){setTimeout(function(){(e=ve.trim(e))&&(v=t,c=!1,p=null,h.src=e,h.crossOrigin="anonymous",x=e,P&&(a||(a=new(window.AudioContext||window.webkitAudioContext),g=a.createMediaElementSource(h),m=a.createAnalyser(),(w=a.createScriptProcessor(4096,g.channelCount,g.channelCount)).onaudioprocess=I,(y=a.createGain()).gain.value=u,g.connect(m),m.connect(w),w.connect(y),y.connect(a.destination)),f.flush({numberOfChannels:g.channelCount,sampleRate:g.context.sampleRate})))},1)},play:D,pause:function(){if(!c)return;h.pause()},isPaused:function(){return!!c&&h.paused},getPosition:O,getDuration:E,getPositionStr:function(){return ve.formatTime(O(),E())},getDurationStr:function(){var e=E();return ve.formatTime(e,e)},seek:q,getVolume:function(){return u},setVolume:H,getMuted:function(){return l},setMuted:function(e){l=ve.toBoolean(e),c&&T(l?0:u);z("onVolumeChange",10)},hasVideo:function(){return!!c&&0<h.videoHeight},getVideoWidth:function(){return c?h.videoWidth:0},getVideoHeight:function(){return c?h.videoHeight:0},getNumberOfChannels:B,getSampleRate:function(){return p?p.sampleRate:0},getVisualData:k,getSpectrumData:function(e,t,n){return J(k(e,t,n))},getStretchedData:function(e,t,n,i,r){if(!p)return[];(!r||e<r)&&(r=e);(i=ve.toInt(i))<0&&(i=0);e<i+r&&(i-=e-r);n=ve.ensureRange(ve.toInt(n),0,p.numberOfChannels-1);for(var a=p.getChannelData(n),o=[],s=[],l=0,u=0;u<r;u++){for(var d=0,c=0,f=Math.floor((u+i)*p.sampleRate*p.duration/e),h=0;h<t;h++){var v=a[Math.floor(l+(f-l)*h/t)];0<v?c<v&&(c=v):v<d&&(d=v)}l=f,o.push(c),s.push(d)}return{length:e,hiData:o,loData:s}},getVU:function(e,t,n){for(var i=k(n||1e3,e,t),r=0,a=0;a<i.length;a++){var o=Math.abs(i[a]);r<o&&(r=o)}{var s;t&&2==B()&&(s=f.balance.getValue(),0==e&&0<s?r*=1-s:1==e&&s<0&&(r*=1+s))}return 0==r?-40:20*ve.log10(r)},getRate:function(){return d},setRate:V,dsp:null,formatTime:ve.formatTime,getFileName:function(){return x},triggerMediaEvent:z,destroy:function(){i&&i.remove();p=null,r&&(r.close(),r=null);a&&(a.close(),a=null)}},f=Z(t);t.dsp=f;var n="html5audio"==(e=ve.toObject(e)).api?"audio":"video",i=he('<div class="ui-media-engine" style="display: none"></div>'),h=document.createElement(n);he(h).attr({width:"100%",style:"display: none"}),i.append(h),he(document.body).append(i);var r=null,a=null,p=null,o=_(),s=!0,l=!1,u=1,d=1,c=!1,v=null,g=null,m=null,w=null,y=null,b=Z(null),P=!1,C=!1,x="",M=!1;function z(e,t){o.triggerMediaEvent(e,t)}function S(t,n){setTimeout(function(){var e;(t=ve.trim(t))&&(v=n,c=!1,p=null,C&&((e=new XMLHttpRequest).open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){(r=r||new(window.AudioContext||window.webkitAudioContext)).decodeAudioData(e.response,function(e){p=e,z("onVisualDataLoad")})},e.send()),h.src=t,h.crossOrigin="anonymous",x=t,P&&(a||(a=new(window.AudioContext||window.webkitAudioContext),g=a.createMediaElementSource(h),m=a.createAnalyser(),(w=a.createScriptProcessor(4096,g.channelCount,g.channelCount)).onaudioprocess=I,(y=a.createGain()).gain.value=u,g.connect(m),m.connect(w),w.connect(y),y.connect(a.destination)),f.flush({numberOfChannels:g.channelCount,sampleRate:g.context.sampleRate})))},1)}function I(e){for(var t=[],n=g.channelCount,i=0;i<n;i++){for(var r=e.inputBuffer.getChannelData(i),a=e.outputBuffer.getChannelData(i),o=0;o<r.length;o++)a[o]=r[o];t.push(a)}f.process({data:t,numberOfChannels:n,length:r.length,sampleRate:g.context.sampleRate})}function D(){c&&(A.suspendAll(),a&&a.resume(),h.play())}function O(){return c?h.currentTime:0}function E(){return!c||h.duration==1/0?0:h.duration}function q(e,t){c&&(h.currentTime=h.duration*ve.toFloat(e)/ve.toFloat(t),z("onProgress"),z("onSeek"))}function T(e){P?y.gain.setValueAtTime(e,a.currentTime):h.volume=e}function H(e){u=ve.ensureRange(ve.toFloat(e),0,1),!l&&c&&T(u),z("onVolumeChange",10)}function B(){return p?p.numberOfChannels:0}function k(e,t,n){var i,r,a,o,s=200;if(p){t=ve.ensureRange(ve.toInt(t),0,p.numberOfChannels-1);var l=p.getChannelData(t),u=Math.floor(h.currentTime*p.sampleRate);for(u+e>=l.length&&(e=l.length-u-e),i=[],r=0;r<e;r++)i.push(l[u]),u++;if(n){var d=u-s;d<0&&(s+=d,d=0),o=[];for(var c=0;c<s;c++)o.push(l[d]),d++;b.previewDSP(o,i,p.sampleRate,f)}}else{if(!m)return[];if(n){for(a=new Uint8Array(s+e),m.getByteTimeDomainData(a),o=[],r=0;r<s.length;r++)o.push((a[r]-128)/128);for(i=[],r=0;r<a.length;r++)i.push((a[(r+s)%2048]-128)/128||0);b.previewDSP(o,i,g.context.sampleRate,f)}else for(a=new Uint8Array(e),m.getByteTimeDomainData(a),i=[],r=0;r<a.length;r++)i.push((a[r%2048]-128)/128)}return i}function V(e){d=ve.toFloat(e),c&&(h.playbackRate=e)}return h.addEventListener("loadeddata",function(){c=!0,h.style.display=0<h.videoHeight?"block":"none",H(u),V(d),z("onLoad"),ve.isFunction(v)&&v(),s?(h.play(),a.resume()):z("onPause"),z("onProgress")},!1),h.ontimeupdate=function(){z("onProgress")},h.onpause=function(){z("onPause"),A.unregisterActiveInstance(t)},h.onplay=function(){z("onPlay"),A.registerActiveInstance(t)},h.onended=function(){M?(q(0,1e3),D()):(z("onComplete"),A.unregisterActiveInstance(t))},t}function ne(){var n={setVideoOwner:function(){},initPlugin:function(e){e=ve.toObject(e),ve.isEmptyObject(e)&&(e={dsp:!0,vis:!0});e.dsp&&(d=!0);e.vis&&(c=!0)},bindEventsHandler:function(e){i.bindEventsHandler(e)},unbindEventsHandler:function(e){i.unbindEventsHandler(e)},setAutoplay:function(e){r=ve.toBoolean(e)},getAutoplay:function(){return r},setLooped:function(e){x=ve.toBoolean(e)},renderFile:function(e,t){if(!(e=ve.trim(e)))return;S(),C=e;var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){I(n.response,t)},n.send()},renderFileVariable:function(e,t){if(!e)return;S(),C=e.name;var n=new FileReader;n.onload=function(e){I(e.target.result,t)},n.readAsArrayBuffer(e)},play:function(){if(!w||!y)return;A.suspendAll(),w=!1,D(v),h=g.context.currentTime-v,z("onPlay"),A.registerActiveInstance(n)},pause:E,isPaused:function(){return w},getPosition:e,getDuration:q,getPositionStr:function(){return ve.formatTime(e(),q())},getDurationStr:function(){var e=q();return ve.formatTime(e,e)},seek:T,getVolume:function(){return s},setVolume:function(e){s=ve.ensureRange(ve.toFloat(e),0,1),y&&!l&&(o.gain.value=s);z("onVolumeChange",10)},getMuted:function(){return l},setMuted:function(e){l=ve.toBoolean(e),y&&(o.gain.value=l?0:s);z("onVolumeChange",10)},hasVideo:function(){return!1},getVideoWidth:function(){return 0},getVideoHeight:function(){return 0},getNumberOfChannels:H,getSampleRate:function(){return y?p.sampleRate:0},getVisualData:B,getSpectrumData:function(e,t,n){return p?J(B(e,t,n)):[]},getStretchedData:function(e,t,n,i,r){if(!y||!b)return[];(!r||e<r)&&(r=e);(i=ve.toInt(i))<0&&(i=0);e<i+r&&(i-=e-r);n=ve.ensureRange(ve.toInt(n),0,p.numberOfChannels-1);for(var a=p.getChannelData(n),o=[],s=[],l=0,u=0;u<r;u++){for(var d=0,c=0,f=Math.floor((u+i)*p.sampleRate*p.duration/e),h=0;h<t;h++){var v=a[Math.floor(l+(f-l)*h/t)];0<v?c<v&&(c=v):v<d&&(d=v)}l=f,o.push(c),s.push(d)}return{length:e,hiData:o,loData:s}},getVU:function(e,t,n){for(var i=B(n||1e3,e,t),r=0,a=0;a<i.length;a++){var o=Math.abs(i[a]);r<o&&(r=o)}{var s;t&&2==H()&&(s=f.balance.getValue(),0==e&&0<s?r*=1-s:1==e&&s<0&&(r*=1+s))}return 0==r?-40:20*ve.log10(r)},getRate:function(){return u},setRate:function(e){u=ve.toFloat(e),y&&(g.playbackRate.value=u)},dsp:null,formatTime:ve.formatTime,getFileName:function(){return C},triggerMediaEvent:z,destroy:function(){M(),g&&(g.stop(),g.disconnect(),g=null);t&&(t.disconnect(),t=null);o&&(o.disconnect(),o=null);a.close()}},f=Z(n);n.dsp=f;var h,v,i=_(),r=!0,a=new(window.AudioContext||window.webkitAudioContext),p=null,g=null,t=null,m=Z(null),o=null,w=!0,s=1,l=!1,u=1,y=!1,d=!1,c=!0,b=!0,P=null,C="",x=!1;function M(){P&&(clearInterval(P),P=null)}function z(e,t){i.triggerMediaEvent(e,t)}function S(){g&&(g.stop(),z("onPause"),y=!1)}function I(e,t){a.decodeAudioData(e,function(e){p=e,w=!r,y=!0,b=c,r?D(0):v=0,z("onLoad"),z("onVisualDataLoad"),z("onProgress"),r&&(z("onPlay"),A.registerActiveInstance(n)),M(),P=setInterval(function(){y&&g&&(g.context.currentTime-h>p.duration?x?T(0,1e3):(E(),z("onProgress"),z("onComplete"),A.unregisterActiveInstance(n)):z("onProgress"))},200),ve.isFunction(t)&&t()},function(e){console.error("Error with decoding audio data: "+e.error)})}function D(e){g&&(g.stop(),g.disconnect(),g=null),t&&(t.disconnect(),t=null),o&&(o.disconnect(),o=null),(g=a.createBufferSource()).buffer=p,g.playbackRate.value=u,(o=a.createGain()).gain.value=s,d?((t=a.createScriptProcessor(4096,p.numberOfChannels,p.numberOfChannels)).onaudioprocess=O,g.connect(t),t.connect(o),o.connect(a.destination),f.flush({numberOfChannels:p.numberOfChannels,sampleRate:p.sampleRate})):(g.connect(o),o.connect(a.destination)),h=g.context.currentTime,g.start(0,e)}function O(e){for(var t=[],n=p.numberOfChannels,i=0;i<n;i++){for(var r=e.inputBuffer.getChannelData(i),a=e.outputBuffer.getChannelData(i),o=0;o<r.length;o++)a[o]=r[o];t.push(a)}f.process({data:t,numberOfChannels:n,length:r.length,sampleRate:p.sampleRate})}function E(){!w&&y&&(v=e(),g.stop(null),w=!0,z("onPause"),A.unregisterActiveInstance(n))}function e(){return y?w?v:ve.ensureRange(g.context.currentTime-h,0,p.duration):0}function q(){return y?p.duration:0}function T(e,t){var n;y&&(n=p.duration*ve.toFloat(e)/ve.toFloat(t),w?v=n:(D(n),h=g.context.currentTime-n),z("onProgress"),z("onSeek"))}function H(){return y?p.numberOfChannels:0}function B(e,t,n){if(!y||!b)return[];t=ve.ensureRange(ve.toInt(t),0,p.numberOfChannels-1);var i=w?v:g.context.currentTime-h,r=p.getChannelData(t),a=Math.floor(i*p.sampleRate);a+e>=r.length&&(e=r.length-a-e);for(var o=[],s=0;s<e;s++)o.push(r[a]),a++;if(n){var l=200,u=a-l;u<0&&(l+=u,u=0);for(var d=[],c=0;c<l;c++)d.push(r[u]),u++;m.previewDSP(d,o,p.sampleRate,f)}return o}return n}function ie(e,t){var n=he('<div class="ui-equalizer-vu-meter">\t<div class="ui-equalizer-vu-meter-channels">\t\t<div class="ui-equalizer-vu-meter-channel-1">\t\t\t<div class="ui-equalizer-vu-meter-channel-1-box">\t\t\t\t<div class="ui-equalizer-vu-meter-channel-1-value"></div>\t\t\t</div>\t\t</div>\t\t<div class="ui-equalizer-vu-meter-channel-2">\t\t\t<div class="ui-equalizer-vu-meter-channel-2-box">\t\t\t\t<div class="ui-equalizer-vu-meter-channel-2-value"></div>\t\t\t</div>\t\t</div>\t</div>\t<div class="ui-equalizer-vu-meter-title"></div></div>');e.append(n);var i=n.find(".ui-equalizer-vu-meter-channel-1-value"),r=n.find(".ui-equalizer-vu-meter-channel-2-value");n.find(".ui-equalizer-vu-meter-title").text(t.title);var a=t.applyDSP,o=t.player;return{drawFrame:function(){var e=A.getVU(o,0,a),t=A.getVU(o,1,a);i.css("height",80*(e+40)/40+"%"),r.css("height",80*(t+40)/40+"%")}}}function re(r,a){return{drawFrame:function(){var e=Math.floor(r.height/2),t=A.getVisualData(a,r.width,0,!0);r.ctx.clearRect(0,0,r.width,r.height),r.ctx.beginPath();for(var n=0;n<r.width;n++){var i=e+t[n]*e;0==n?r.ctx.moveTo(n,i):r.ctx.lineTo(n,i)}r.ctx.strokeStyle="#727272",r.ctx.stroke()}}}function ae(u,d){var t=10,n=.5,c=u.RGB(160,160,160),f=u.RGB(114,114,114),h=[],v=[];function e(e,t){if(t>=e.length)for(var n=t-e.length,i=0;i<n;i++)e.push(0);else e.length=t}function p(e,t,n){for(var i=0;i<e.length;i++)e[i]-=n,t[i]>e[i]&&(e[i]=t[i]),e[i]<0&&(e[i]=0)}function g(e){return e*t*(1-n)+Math.sqrt(e*u.height*t)*n}return e(h,99),e(v,99),{drawFrame:function(e){var t=A.getSpectrumData(d,99,0,!0);p(h,t,.5),p(v,t,.14);var n=Math.floor((e-4)/5),i=(e-5*n+1)/2;u.clear();for(var r=0;r<n;r++){var a=g(h[r]),o=u.height-1-a,s=i+5*r;u.fillRect(s,o,4,a,c);var l=u.height-1-g(v[r]);u.line(s,l,4+s-1,l,f)}u.redraw()}}}function oe(r,a){var o=[],s=8,l=.5,u=r.RGB(120,120,120);return function(e,t){if(t>=e.length)for(var n=t-e.length,i=0;i<n;i++)e.push(0);else e.length=t}(o,500),{drawFrame:function(){var e=A.getSpectrumData(a,500,0,!0);!function(e,t,n){for(var i=0;i<e.length;i++)e[i]-=n,t[i]>e[i]&&(e[i]=t[i]),e[i]<0&&(e[i]=0)}(o,e,1),r.clear();for(var t,n=0;n<500;n++){var i=(t=o[n])*s*(1-l)+Math.sqrt(t*r.height*s)*l;r.line(n,r.height-1-i,n,r.height-1,u)}r.redraw()}}}function se(e,t){var n=he('<div class="ui-equalizer-vis">\t<div class="ui-equalizer-vis-frame">\t\t<div class="ui-equalizer-vis-box">\t\t\t<canvas class="ui-equalizer-vis-canvas"></canvas>\t\t</div>\t</div>\t<div class="ui-equalizer-vis-tabs">\t\t<div class="ui-equalizer-vis-tab selected" data-vis-type="2">Bars</div>\t\t<div class="ui-equalizer-vis-tab" data-vis-type="1">Spectrum</div>\t\t<div class="ui-equalizer-vis-tab" data-vis-type="0">Waveform</div>\t</div></div>');e.append(n);var i=n.find(".ui-equalizer-vis-box"),r=ve.initGraph(n.find(".ui-equalizer-vis-canvas"),500,48),a=re(r,t),o=ae(r,t),s=oe(r,t),l=2,u=null;function d(){1==l?s.drawFrame():2==l?o.drawFrame(i.width()):a.drawFrame()}function c(){d()}function f(e){l=ve.toInt(e),n.find(".ui-equalizer-vis-tab").removeClass("selected"),n.find('.ui-equalizer-vis-tab[data-vis-type="'+l+'"]').addClass("selected")}return c(),n.on("click",".ui-equalizer-vis-tab",function(){f(ve.toInt(he(this).attr("data-vis-type"))),ve.isFunction(u)&&u({visType:l})}),setInterval(d,40),{adjust:c,setVisType:f,setVisChangeHandler:function(e){u=e}}}function le(e,t){var a=he('<div class="ui-equalizer-sound-param ui-stuff ui-non-selectable">\t<div class="ui-equalizer-sound-param-image">\t\t<svg viewBox="0 0 72 72">\t\t\t<path class="ui-equalizer-sound-param-bg" fill="#8b8b8b"/>\t\t\t<path class="ui-equalizer-sound-param-fg" fill="#4fcb1d"/>\t\t\t<path class="ui-equalizer-sound-param-border" fill="#8b8b8b"/>\t\t</svg>\t\t<div class="ui-equalizer-sound-param-value"></div>\t\t<div class="ui-equalizer-sound-param-arrow"></div>\t</div>\t<div class="ui-equalizer-sound-param-label"></div></div>');e.append(a);var n=a.find(".ui-equalizer-sound-param-bg"),i=a.find(".ui-equalizer-sound-param-fg"),r=a.find(".ui-equalizer-sound-param-border"),o=a.find(".ui-equalizer-sound-param-value"),s=a.find(".ui-equalizer-sound-param-arrow"),l=a.find(".ui-equalizer-sound-param-label"),d=36,c=36,u=45,f=360-u,h=0,v=1,p=0,g=0,m=null,w=null;C(n,u,f,36,25),C(r,u,f,36,34),b(),(t=ve.toObject(t)).hasOwnProperty("color")||(t.color="#4fcb1d");t.player;function y(e){var t,n=!1;(e=ve.toObject(e)).hasOwnProperty("label")&&l.text(ve.toString(e.label)),e.hasOwnProperty("color")&&(t=ve.toString(e.color),i.attr("fill",t),s.css("border-color",t),s.css("box-shadow","0 0 4px "+t)),e.hasOwnProperty("minValue")&&(h=ve.toFloat(e.minValue),n=!0),e.hasOwnProperty("maxValue")&&(v=ve.toFloat(e.maxValue),n=!0),e.hasOwnProperty("value")&&(p=ve.toFloat(e.value),n=!0),e.hasOwnProperty("baseValue")&&(g=ve.toFloat(e.baseValue),n=!0),e.hasOwnProperty("formatHandler")&&(m=e.formatHandler),e.hasOwnProperty("onChange")&&(w=e.onChange),n&&b()}function b(){var e=P(p);C(i,P(g),e,36,20),s.css("transform","rotate("+(e-180)+"deg)"),ve.isFunction(m)?o.text(ve.toString(m(p))):o.text(p.toFixed(2))}function P(e){return(e-h)/(v-h)*(f-u)+u}function C(e,t,n,i,r){var a;n<t&&(a=t,t=n,n=a);var o=(t+90)*Math.PI/180,s=(n+90)*Math.PI/180,l=180<(n-t+360)%360?1:0,u=["M",d+i*Math.cos(o),c+i*Math.sin(o),"A",i,i,0,l,1,d+i*Math.cos(s),c+i*Math.sin(s),"L",d+r*Math.cos(s),c+r*Math.sin(s),"A",r,r,1,l,0,d+r*Math.cos(o),c+r*Math.sin(o),"Z"];he(e).attr("d",u.join(" "))}return y(t),a.on("mousedown touchstart",function(e){function t(e){var t=a.offset().left+d-e.pageX,n=a.offset().top+c-e.pageY,i=(180*Math.atan2(-n,-t)/Math.PI+720-90)%360;ve.hypot(t,n)<20&&(i=45*Math.floor((i+23)/45));var r=((i=ve.ensureRange(i,u,f))-u)/(f-u)*(v-h)+h;ve.isFunction(w)&&w({value:r})}ve.dragAndDrop({event:e,owner:this,cursor:"pointer",startDragging:t,processDragging:t})}),{update:y,value:function(){return p},destroy:function(){a.remove(),a.off()}}}function ue(e,t){var r=ve.toInt(t.limit),i=ve.toString(t.limitText),a=(ve.toInt(t.index),ve.toFloat(t.value)),o=(t.player,he('<div class="ui-equalizer-band">\t<div class="ui-equalizer-band-value">0</div>\t<div class="ui-equalizer-band-slider">\t\t<div class="ui-equalizer-band-slider-ruler"></div>\t\t<div class="ui-equalizer-band-slider-line">\t\t\t<div class="ui-equalizer-band-slider-value">\t\t\t\t<div class="ui-equalizer-band-slider-placeholder"></div>\t\t\t</div>\t\t</div>\t</div>\t<div class="ui-equalizer-band-label"></div></div>'));e.append(o);var s=o.find(".ui-equalizer-band-value"),l=o.find(".ui-equalizer-band-slider"),u=o.find(".ui-equalizer-band-slider-line"),d=o.find(".ui-equalizer-band-slider-value"),n=o.find(".ui-equalizer-band-slider-placeholder");function c(){var e=Math.round(a);0<e?s.text("+"+e+i):s.text(e+i);var t=l.offset().top-u.offset().top,n=l.outerHeight();d.css({top:(-a+r)/(2*r)*n+t+"px"})}return o.find(".ui-equalizer-band-label").text(t.label),c(),function(){for(var e=o.find(".ui-equalizer-band-slider-ruler"),t=Math.floor(r/4),n=0;n<=r;n++){var i=he('<div class="ui-equalizer-band-slider-ruler-item"></div>');i.css("top",100*n/r+"%"),n%t==0&&i.addClass("ui-equalizer-band-slider-ruler-item-big"),e.append(i)}}(),{sliderOffsTop:function(){return l.offset().top},sliderHeight:function(){return l.outerHeight()},setValue:function(e){(e=ve.toFloat(e))!=a&&(a=e,c())},getOffsX:function(){return o.offset().left+o.outerWidth()/2},setColor:function(e){d.css("background-color",e),n.css({"background-color":e,"box-shadow":"0 0 8px "+e})},destroy:function(){o.remove()}}}function de(e,a){var t=he('<div class="ui-equalizer-graphic-eq">\t<div class="ui-equalizer-graphic-eq-top-panel">\t\t<div class="ui-equalizer-graphic-eq-preset-button">\t\t\t<div class="ui-equalizer-graphic-eq-preset-button-title">Preset</div>\t\t\t<div class="ui-equalizer-graphic-eq-preset-button-arrow">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>\t\t\t</div>\t\t</div>\t</div>\t<div class="ui-equalizer-graphic-eq-box">\t\t<div class="ui-equalizer-graphic-eq-scroll-box">\t\t\t<div class="ui-equalizer-graphic-eq-scroll-box-content">\t\t\t\t<div class="ui-equalizer-graphic-eq-sliders-panel">\t\t\t\t\t<div class="ui-equalizer-graphic-eq-preamp"></div>\t\t\t\t\t<div class="ui-equalizer-graphic-eq-bands">\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t\t<div class="ui-equalizer-graphic-eq-band"></div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>\t\t</div>\t</div></div>');e.append(t);var n=t.find(".ui-equalizer-graphic-eq-preamp"),o=t.find(".ui-equalizer-graphic-eq-bands"),s=ue(n,{player:a,label:"Amp",limit:12,limitText:" dB"}),l=[];t.findAll(".ui-equalizer-graphic-eq-band").each(function(e){var t=ue(he(this),{player:a,label:function(e){if((e=ve.toInt(e))<0||9<e)return"";var t=P.dspEQFreqs[e];return t<1e3?ve.toString(t):ve.toString(Math.floor(t/1e3))+"k"}(e),limit:20,index:e,value:a.dsp.equalizer.getEQBand(e)});l.push(t)});var i=ve(t.find(".ui-equalizer-graphic-eq-scroll-box")).ScrollBox({skin:"generic"});return t.on("click",".ui-equalizer-graphic-eq-preset-button",function(){var e,r,t;e=this,r=function(e){for(var t=e.bands,n=0;n<10;n++)a.dsp.equalizer.setEQBand(n,t[n])},t=he('<div class="ui-equalizer-presets-dropdown" data-ui-dropdown="tooltip-generic box-generic arrow-off to-bottom-right width-auto margin-2 anim-in-slide anim-out-slide">\t<div class="ui-equalizer-presets-dropdown-title">\t\tSelect preset from list\t</div>\t<div class="ui-equalizer-presets-dropdown-scroll-box" data-ui-dropdown-box>\t\t<div class="ui-equalizer-presets-dropdown-list"></div>\t</div></div>'),ve.openDropdown(e,t,function(t){for(var e=t.find(".ui-equalizer-presets-dropdown-list"),n=0;n<dspEQPresets.length;n++){var i=he('<div class="ui-equalizer-presets-dropdown-list-item"></div>');i.text(dspEQPresets[n].title),e.append(i)}t.on("click",".ui-equalizer-presets-dropdown-list-item",function(){var e=he(this).index();ve.isFunction(r)&&r({bands:dspEQPresets[e].bands}),ve.closeDropdown(t)})})}),t.on("mousedown touchstart",".ui-equalizer-graphic-eq-preamp",function(e){function t(e){var t=(e.pageY-s.sliderOffsTop())/s.sliderHeight(),t=ve.ensureRange(12-24*t,-12,12);a.dsp.equalizer.setPreamp(t)}ve.dragAndDrop({event:e,owner:this,cursor:"pointer",startDragging:t,processDragging:t})}),t.on("mousedown touchstart",".ui-equalizer-graphic-eq-band",function(e){function t(e){var t,n,i=Math.floor(o.outerWidth()/10),r=Math.floor((e.pageX-o.offset().left)/i);r<0||9<r||(t=l[r],n=(e.pageY-t.sliderOffsTop())/s.sliderHeight(),n=ve.ensureRange(20-40*n,-20,20),a.dsp.equalizer.setEQBand(r,n))}ve.dragAndDrop({event:e,owner:this,cursor:"pointer",startDragging:t,processDragging:t})}),{update:function(e){(e=ve.toObject(e)).hasOwnProperty("color")&&function(e){s.setColor(e);for(var t=0;t<l.length;t++)l[t].setColor(e)}(e.color)},preampChanged:function(){s.setValue(a.dsp.equalizer.getPreamp())},eqBandChanged:function(){for(var e=0;e<l.length;e++)l[e].setValue(a.dsp.equalizer.getEQBand(e))},bandOffsX:function(e){return l[e].getOffsX()},destroy:function(){s.destroy();for(var e=0;e<l.length;e++)l[e].destroy();i.destroy(),t.off(),t.remove()}}}function ce(e,t){var n=he('<div class="ui-equalizer-graph">\t<canvas class="ui-equalizer-graph-canvas"></canvas></div>');e.append(n);var i=(t=ve.toObject(t)).onGetPoints,s=(t.player,n.find(".ui-equalizer-graph-canvas")[0]),r=0;function a(){s.width=n.outerWidth(),s.height=n.outerHeight(),r=s.width;var e=s.getContext("2d");e.clearRect(0,0,s.width,s.height);var t=ve.makeArray(i(s.width,s.height));!function(e,t,n,i){var r;for(e.lineWidth=2,e.strokeStyle=n,e.beginPath(),r=0;r<t.length;r++){var a,o=t[r];0==r?e.moveTo(o.x,o.y):(a=t[r-1],e.bezierCurveTo(a.outer.x,a.outer.y,o.inner.x,o.inner.y,o.x,o.y))}e.stroke(),i&&(e.lineTo(s.width,s.height),e.lineTo(0,s.height),e.lineTo(0,t[0].y),e.fillStyle=i,e.fill())}(e,t=function(e){for(var t=0;t<e.length;t++){var n=e[Math.max(t-1,0)],i=e[t],r=e[Math.min(t+1,e.length-1)],a=Math.sqrt(Math.pow(i.x-n.x,2)+Math.pow(i.y-n.y,2)),o=Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)),s=.4*a/(a+o),l=.4*o/(a+o);e[t].inner={x:i.x-s*(r.x-n.x),y:i.y-s*(r.y-n.y)},e[t].outer={x:i.x+l*(r.x-n.x),y:i.y+l*(r.y-n.y)}}return e}(t),"#8b8b8b","#dadada")}return a(),{drawGraph:a,adjust:function(){r!=n.outerWidth()&&a()},destroy:function(){n.remove()}}}P.mediaEngineVersion&&P.mediaEngineVersion()>=q||((w={xQuery:function(){return window.jQuery||T},findAll:function(e){return w.xQuery()(document).findAll(e)},toInt:function(e){var t=typeof e;return"number"==t?Math.floor(e):"boolean"==t?e?1:0:"string"==t&&parseInt(e)||0},toFloat:function(e){var t=typeof e;return"number"==t?e:"boolean"==t?e?1:0:"string"==t?parseFloat(e.replace(/e.*$/i,"")):0},toBoolean:function(e){return!!e},isString:function(e){return"string"==typeof e},toString:function(e){var t=typeof e;return"number"==t?e.toString():"boolean"==t?e?"1":"0":"string"==t?e:""},trim:function(e){var t=typeof e;return"number"==t?e.toString():"boolean"==t?e?"1":"0":"string"==t?e.trim():""},isObject:function(e){return"object"==typeof e&&null!==e&&!(e instanceof Array)},isEmptyObject:function(e){if(!w.isObject(e))return!1;for(var t in e)return!1;return!0},toObject:function(e){return w.isObject(e)?e:{}},isArray:function(e){return"object"==typeof e&&e instanceof Array},toArray:function(e){return w.isArray(e)?e:[]},makeArray:function(e){return w.isArray(e)?e:[e]},isFunction:function(e){return"function"==typeof e},toFunction:function(e){return"function"==typeof e?e:function(){}},format2Digit:function(e){return 9<e?e:"0"+e},formatTime:function(e,t){var n=(e=w.toInt(e))%60,i=(e=Math.floor(e/60))%60;return e=Math.floor(e/60),3600<=t?e+":"+w.format2Digit(i)+":"+w.format2Digit(n):i+":"+w.format2Digit(n)},ensureRange:function(e,t,n){return e<t?t:n<e?n:e},removeClassByPattern:function(e,t){var n=w.xQuery()(e),i=w.toString(t);i=(i=i.replace(/[^-\w\d\*]/g,"")).replace(/[*]/g,"[-\\w\\d]+");for(var r=new RegExp("\\b"+i+"\\b");;){var a=w.toString(n.attr("class"));if(0==a.length)break;var o=a.match(r);if(!o)break;n.removeClass(o[0])}},getDeltaFromScrollEvent:function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),{x:t,y:n}},extend:function(e,t){for(var n in t)e[n]=t[n]},textToHTML:function(e){return e=w.toString(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/  /g,"&nbsp; ").replace(/(\r\n|\n\r|\r|\n)/g,"<br />").replace(/\t/g,"&emsp;")},formatThousands:function(e,t){return t=w.toInt(t),e.toFixed(t).replace(/\B(?=(\d{3})+(?!\d))/g,",")},escapeJavascriptString:function(e){return"'"+(e=(e=(e=(e=(e=e.replace(/\\/g,"\\\\")).replace(/\//g,"\\/")).replace(/'/g,"\\'")).replace(/"/g,'\\"')).replace(/\n/g,"\\n"))+"'"}}).dumpJS=function(e,r){var t,a="";function o(e){for(var t="",n=0;n<e;n++)t+="\t";return t}return r=w.toInt(r),w.isArray(e)?function(e){a+="[";for(var t=0;a+=w.dumpJS(e[t],r),!(++t>=e.length);)a+=", ";a+="]"}(e):w.isObject(e)?function(e){r++,a+="{\n";for(var t=Object.keys(e),n=0;;){var i=t[n];if(a+=o(r)+w.escapeJavascriptString(i)+": "+w.dumpJS(e[i],r),++n>=t.length){a+="\n";break}a+=",\n"}a+=o(--r)+"}"}(e):"string"==typeof e?(t=e,a+=w.escapeJavascriptString(t)):a+="number"==typeof e?e:"boolean"==typeof e?e?"true":"false":"null",a},w.dumpPHP=function(e,r){var a="";function o(e){for(var t="",n=0;n<e;n++)t+="\t";return t}function s(e){return'"'+(e=(e=(e=(e=(e=e.replace(/\\/g,"\\\\")).replace(/\//g,"\\/")).replace(/'/g,"\\'")).replace(/"/g,'\\"')).replace(/\n/g,"\\n"))+'"'}return r=w.toInt(r),w.isArray(e)?function(e){a+="array(";for(var t=0;a+=w.dumpPHP(e[t],r),!(++t>=e.length);)a+=", ";a+=")"}(e):w.isObject(e)?function(e){r++,a+="array(\n";for(var t=Object.keys(e),n=0;;){var i=t[n];if(a+=o(r)+s(i)+" => "+w.dumpPHP(e[i],r),++n>=t.length){a+="\n";break}a+=",\n"}a+=o(--r)+")"}(e):a+="string"==typeof e?s(e):"number"==typeof e?e:"boolean"==typeof e?e?"true":"false":"null",a},w.getProp=function(e,t){var n;if(!e)return e;if("string"!=typeof t||0==t.length)return e;if("."==t[0])return w.getProp(e,t.substring(1,t.length));if(n=t.match(/^([-_a-zA-Z0-9]+)(.*)$/)){var i=n[1];return w.getProp(e[i],n[2])}if(n=t.match(/^\[([0-9]+)\](.*)$/)){var r=w.toInt(n[1]);return w.getProp(e[r],n[2])}if(n=t.match(/^\[([-_a-zA-Z0-9]+)=([-_a-zA-Z0-9]+)\](.*)$/)){e=w.toArray(e);for(var a=w.toString(n[1]),o=w.toString(n[2]),s=0;s<e.length;s++)if(w.toString(e[s][a])==o)return w.getProp(e[s],n[3])}else if(n=t.match(/^\[([-_a-zA-Z0-9]+)=["]((?:[\\"]|[^"])*)["]\](.*)$/)){var l=w.toString(n[1]),u=w.toString(n[2]).replace(/\\([\\"])/g,"$1");for(s=0;s<e.length;s++)if(w.toString(e[s][l])==u)return w.getProp(e[s],n[3])}else;},w.setProp=function(e,t,n){var i;if(0==t.length)return n;if("."==t[0])return w.setProp(e,t.substring(1,t.length),n);if(r=t.match(/^([-_a-zA-Z0-9]+)(.*)$/)){e=w.toObject(e);var r,a=r[1],o=r[2];if(r=o.match(/^\[([-_a-zA-Z0-9]+)[=]([-_a-zA-Z0-9]+)\](.*)$/)){var s=w.toString(r[1]),l=w.toString(r[2]);for(e[a]=w.toArray(e[a]),i=0;i<e[a].length;i++)if(w.toString(e[a][i][s])==l)return e[a][i]=w.setProp(e[a][i],r[3],n),e;return e}if(r=o.match(/^\[([-_a-zA-Z0-9]+)[=]["]((?:[\\"]|[^"])*)["]\](.*)$/)){var u=w.toString(r[1]),d=w.toString(r[2]).replace(/\\([\\"])/g,"$1");for(e[a]=w.toArray(e[a]),i=0;i<e[a].length;i++)if(w.toString(e[a][i][u])==d)return e[a][i]=w.setProp(e[a][i],r[3],n),e;return e}return e[a]=w.toObject(e[a]),void 0===n&&0==o.length?delete e[a]:e[a]=w.setProp(e[a],o,n),e}if(r=t.match(/^\[([0-9]+)\](.*)$/)){e=w.toArray(e);var c=w.toInt(r[1]);return e[c]=w.setProp(e[c],r[2],n),e}return e},w.escapeProp=function(e){return w.toString(e).replace(/["\\]/g,"\\$&")},w.validateEmail=function(e){return/^[-_\w\d]+([\.][-_\w\d]+)*@[-\w\d]+([\.]\w{2,})+$/.test(w.toString(e))},w.linkify=function(e){return e=(e=w.textToHTML(e)).replace(/\b((http:\/\/|https:\/\/|\/\/|www\.)([-a-zA-Z0-9.]+\.)+[a-z0-9]{2,}[-a-zA-Z0-9@:%_\+.~#?&//=;]*)(\s|$|<)/gi,'<a href="$1" target="_blank">$1</a>$4')},w.stripHttpAndWwwFromUrl=function(e){return e=(e=(e=w.trim(e)).replace(/^(http:\/\/|https:\/\/|\/\/)/,"")).replace(/^www./,"")},w.selectElementText=function(e){var t,n,i=w.xQuery()(e)[0];document.body.createTextRange?((t=document.body.createTextRange()).moveToElementText(i),t.select()):window.getSelection&&(n=window.getSelection(),(t=document.createRange()).selectNodeContents(i),n.removeAllRanges(),n.addRange(t))},w.scrollToElement=function(e,t,n){for(var f=w.xQuery(),i=f(e),r=i.parent();r[0]!=document.body;){var a=r.css("overflow");"auto"!=a&&"scroll"!=a&&"hidden"!=a||function(e,t,n,i){var r=f(e),a=f(t);if(0==r.length||0==a.length)return;n=ve.toInt(n),i=ve.toInt(i);var o=a.offset().top,s=r.offset().top,l=r.scrollTop(),u=r[0].clientHeight,d=a.outerHeight(),c=o-s;c<n&&r.scrollTop(l+c-n);u<c+i+d&&r.scrollTop(l+o-s-u+d+i)}(r,i,0,0),r=r.parent()}!function(e,t,n){var i=f(e);if(0==i.length)return;t=ve.toInt(t),n=ve.toInt(n);var r=f(window),a=r.scrollTop(),o=i.offset().top-a,s=r.innerHeight(),l=i.outerHeight();o<t&&r.scrollTop(a+o-t);s<o+n+l&&r.scrollTop(a+o-s+l+n)}(i,t,n)},w.isVisible=function(e){var t=w.xQuery(),n=t(e);if(0==n.length)return!1;if("none"==h(n[0],"display")||"hidden"==h(n[0],"visibility")||"0"==h(n[0],"opacity"))return!1;var i=n.offset().top,r=n.outerHeight(),a=t(window),o=a.scrollTop();if(i+r<o)return!1;if(i-o>=a.innerHeight())return!1;for(var s,l,u,d,c=n[0].parentNode;c!=document.body;){var f=h(c,"overflow");if("auto"==f||"scroll"==f||"hidden"==f)if(!(s=i,l=r,u=void 0,u=t(c),(d=u.offset().top)<s+l&&s-d<u[0].clientHeight))return!1;c=c.parentNode}function h(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)}return!0},w.download=function(e,t,n){t=t||"download.txt",n=n||"text/plain";var i=new Blob([e],{type:n}),r=window.URL.createObjectURL(i),a=document.createElement("a");a.href=r,a.setAttribute("download",t),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(a.href)},w.log10=Math.log10||function(e){return Math.log(e)*Math.LOG10E},w.log2=Math.log2||function(e){return Math.log(e)*Math.LOG2E},w.hypot=Math.hypot||function(e,t){return Math.sqrt(e*e+t*t)},w.randSeed=location.hostname.charCodeAt(0),w.randMax=1073741823,w.rand=function(){return w.randSeed=22695477*w.randSeed+1&1073741823},w.srand=function(e){w.randSeed=e},w._randSeed=location.hostname.charCodeAt(0),w._rand=function(){return w._randSeed=22695477*w._randSeed+1&1073741823},(e=Element.prototype).matches||(e.matches=e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector),H.prototype=T.fn=T.prototype={constructor:T,push:[].push,node:null,length:0,extendUI:function(e){for(var t in e)this[t]=e[t]}},T.fn.hasClass=function(e){return-1<(" "+this.node.className+" ").indexOf(" "+e+" ")},T.fn.addClass=function(e){this.hasClass(e)||(this.node.className.length?this.node.className=this.node.className+" "+e:this.node.className=e)},T.fn.removeClass=function(e){var t=this.node.className+" ";this.node.className=t.replace(e+" ","").trim()},T.fn.toggleClass=function(e,t){"boolean"!=typeof t&&(t=!this.hasClass(e)),t?this.addClass(e):this.removeClass(e)},T.fn.show=function(){this.node.style.display="block"},T.fn.hide=function(){this.node.style.display="none"},T.fn.toggle=function(e){"boolean"!=typeof e&&(e="none"==window.getComputedStyle(this.node,null).getPropertyValue("display")),e?this.show():this.hide()},T.fn.css=function(e,t){if("string"==typeof e&&void 0===t)return window.getComputedStyle(this.node,null).getPropertyValue(e.trim());if("string"==typeof e)return this.node.style[e]=t,null;for(var n in e)this.node.style[n]=e[n];return null},T.fn.attr=function(e,t){if("string"==typeof e&&void 0===t)return this.node.getAttribute(e);if("string"==typeof e)return this.node.setAttribute(e,t),null;for(var n in e)this.node.setAttribute(n,e[n]);return null},T.fn.removeAttr=function(e){this.node.removeAttribute(e)},T.fn.data=function(e,t){return this.node._uiData=this.node._uiData||{},void 0===e?this.node._uiData:void 0===t?this.node._uiData[e]:(this.node._uiData[e]=t,null)},T.fn.removeData=function(e){this.node._uiData=this.node._uiData||{},delete this.node._uiData[e]},T.fn.empty=function(){this.node.innerHTML=""},T.fn.html=function(e){return void 0===e?this.node.innerHTML:(this.node.innerHTML=e,null)},T.fn.text=function(e){return void 0===e?this.node.innerText.trim():(this.node.innerText=e,null)},T.fn.remove=function(){this.node.parentNode.removeChild(this.node)},T.fn.detach=function(){return T(this.node.parentNode.removeChild(this.node))},T.fn.append=function(e){"object"==typeof e?e instanceof HTMLElement?this.node.appendChild(e):e instanceof T?this.node.appendChild(e.node):window.jQuery&&e instanceof jQuery&&0<e.length&&this.node.appendChild(e[0]):"string"==typeof e&&this.node.appendChild(T(e).node)},T.fn.prepend=function(e){var t;"object"==typeof e?e instanceof HTMLElement?B(this.node,e):e instanceof T?B(this.node,e.node):window.jQuery&&e instanceof jQuery&&0<e.length&&B(this.node,e[0]):"string"!=typeof e||(t=T(e).node)&&B(this.node,t)},T.fn.appendTo=function(e){e instanceof T?e.node.appendChild(this.node):window.jQuery&&e instanceof jQuery?e.append(this[0]):e.appendChild(this.node)},T.fn.insertBefore=function(e){e instanceof T?k(this.node,e.node):window.jQuery&&e instanceof jQuery&&e.length?k(this[0],e.node):k(this,e.node)},T.fn.offset=function(){var e=this.node;if(e.getBoundingClientRect)var t=e.getBoundingClientRect(),n=t.left+window.pageXOffset,i=t.top+window.pageYOffset;else for(i=n=0;e;)n+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return{left:n,top:i}},T.fn.width=function(e){return void 0===e?parseInt(window.getComputedStyle(this.node,null).getPropertyValue("width")):(this.node.style.width=w.toInt(e)+"px",null)},T.fn.innerWidth=function(e){return void 0===e?this.node==window?document.documentElement.clientWidth:this.node.clientWidth||this.node.innerWidth:(this.node.style.width=w.toInt(e)+this.node.clientWidth-parseInt(window.getComputedStyle(this.node,null).getPropertyValue("width"))+"px",null)},T.fn.outerWidth=function(e){return void 0===e?this.node.offsetWidth:(this.node.style.width=w.toInt(e)+this.node.offsetWidth-parseInt(window.getComputedStyle(this.node,null).getPropertyValue("width"))+"px",null)},T.fn.height=function(e){return void 0===e?parseInt(window.getComputedStyle(this.node,null).getPropertyValue("height")):(this.node.style.height=w.toInt(e)+"px",null)},T.fn.innerHeight=function(e){return void 0===e?this.node==window?document.documentElement.clientHeight:this.node.clientHeight||this.node.innerHeight:(this.node.style.height=w.toInt(e)+this.node.clientHeight-parseInt(window.getComputedStyle(this.node,null).getPropertyValue("height"))+"px",null)},T.fn.outerHeight=function(e){return void 0===e?this.node.offsetHeight:(this.node.style.height=w.toInt(e)+this.node.offsetHeight-parseInt(window.getComputedStyle(this.node,null).getPropertyValue("height"))+"px",null)},T.fn.scrollLeft=function(e){return void 0===e?this.node==window?window.pageXOffset:this.node.scrollLeft:(this.node==window?window.scrollTo(e,window.pageYOffset):this.node.scrollLeft=e,null)},T.fn.scrollTop=function(e){return void 0===e?this.node==window?window.pageYOffset:this.node.scrollTop:(this.node==window?window.scrollTo(window.pageXOffset,e):this.node.scrollTop=e,null)},l={mouseenter:"mouseover",mouseleave:"mouseout"},T.fn.on=function(e,n,i){l.hasOwnProperty(e)&&(e=l[e]),"function"==typeof n&&(i=n,n=null);var t=e.split(" ");if(1<t.length)for(var r=0;r<t.length;r++)this.on(t[r],n,i);else{function a(e){var t;n?(t=e.target,e.target.matches(n)||(t=e.target.closest(n)),t&&i.call(t,e)):i.call(o,e)}var o=this.node,s=w.toArray(this.node._uiEvents);s.push({name:e,selector:n,listener:a,handler:i}),this.node._uiEvents=s,this.node.addEventListener(e,a)}},T.fn.off=function(e,t,n){var i;if("function"==typeof t&&(n=t,t=null),void 0!==e){u=w.toArray(this.node._uiEvents);var r=[];if(t||n){if(w.isFunction(n))for(s=0;s<u.length;s++)(i=u[s]).name==e&&i.handler==n?this.node.removeEventListener(i.name,i.listener):r.push(i);else if(t)for(s=0;s<u.length;s++)(i=u[s]).name==e&&i.selector==t?this.node.removeEventListener(i.name,i.listener):r.push(i)}else for(s=0;s<u.length;s++)(i=u[s]).name==e?this.node.removeEventListener(i.name,i.listener):r.push(i);this.node._uiEvents=r,u=null}else{for(u=w.toArray(this.node._uiEvents),s=0;s<u.length;s++)i=u[s],this.node.removeEventListener(i.name,i.listener);for(var a=this.node,o=this.node.childNodes||[],s=0;s<o.length;s++){for(var l=o[s],u=w.toArray(this.node._uiEvents),d=0;d<u.length;d++)i=u[d],l.removeEventListener(i.name,i.listener);delete l._uiEvents,this.node=l,this.off()}this.node=a}},T.fn.find=function(e){if("object"==typeof e){var a=e instanceof T?e.node:e instanceof HTMLElement?e:window.jQuery&&e instanceof jQuery&&e.length?e[0]:null;return T(a?function e(t){for(var n=0;n<t.length;n++){var i=t[n];if(i==a)return i;var r=e(i.childNodes);if(r)return r}return null}(a.childNodes):null)}return T(this.node.querySelector(e))},T.fn.findAll=function(e){return"object"==typeof e?this.find(e):T(this.node.querySelectorAll(e))},T.fn.closest=function(e){if("string"==typeof e)return T(this.node.closest(e));for(var t=this.node;;){if(!t)return T(null);if(t==e)return T(t);t=t.parentNode}},T.fn.is=function(e){if("string"==typeof e)return this.node.matches(e);if("object"==typeof e){if(e instanceof T)return this.node==e.node;if(window.jQuery&&e instanceof jQuery&&0<e.length)return this.node==e[0]}return this.node==e},T.fn.clone=function(e){return void 0===e&&(e=!0),T(this.node.cloneNode(e))},T.fn.trigger=function(e,t){var n;if(this.node)switch(e){case"click":case"mousedown":case"mouseup":(n=document.createEvent("MouseEvents")).initEvent(e,!0,!0),this.node.dispatchEvent(n);break;case"focus":case"change":case"blur":case"select":(n=document.createEvent("HTMLEvents")).initEvent(e,!0,!0),this.node.dispatchEvent(n);break;case"resize":window.dispatchEvent(new Event("resize"));break;default:this.node.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:w.toObject(t)}))}},T.fn.click=function(e,t){void 0!==e||void 0!==t?this.on("click",e,t):this.trigger("click")},T.fn.resize=function(e,t){void 0!==e||void 0!==t?this.on("resize",e,t):this.trigger("resize")},T.fn.each=function(e){if("function"==typeof e)for(var t=0;t<this.length;t++)e.call(this[t],t)},T.fn.eq=function(e){return e<0||e>=this.length?T(null):T(this[e])},T.fn.children=function(e){for(var t=T(),n=this.node.childNodes,i=0;i<n.length;i++){var r=n[i];3==r.nodeType||e&&!r.matches(e)||t.push(r)}return t.node=t.length?t[0]:null,t},T.fn.filter=function(e){":visible"==e&&(e=function(){return"none"!=this.style.display});for(var t=[],n=0;n<this.length;n++){e.call(this[n],n)&&t.push(this[n])}for(n=this.length=0;n<t.length;n++)this.push(t[n]);return this},T.fn.focus=function(){this.node&&this.node.focus&&this.node.focus()},T.easing=y={easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return e<.5?2*e*e:-2*e*e+4*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){var t=e-1;return t*t*t+1},easeInOutCubic:function(e){if(e<.5)return 4*e*e*e;var t=2*e-2;return.5*t*t*t+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){var t=e-1;return t*t*t*(1-e)+1},easeInOutQuart:function(e){if(e<.5)return 8*e*e*e*e;var t=e-1;return-8*t*t*t*t+1},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){var t=e-1;return t*t*t*t*t+1},easeInOutQuint:function(e){if(e<.5)return 16*e*e*e*e*e;var t=2*e-2;return.5*t*t*t*t*t+1},easeInSine:function(e){return Math.sin((e-1)*(Math.PI/2))+1},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return.5*(1-Math.cos(e*(Math.PI/2)))},easeInExpo:function(e){return 0==e?e:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1==e?e:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0==e||1==e?e:e<.5?.5*Math.pow(2,20*e-10):-.5*Math.pow(2,-20*e+10)+1},easeInCirc:function(e){return 1-Math.sqrt(1-e*e)},easeOutCirc:function(e){return Math.sqrt((2-e)*e)},easeInOutCirc:function(e){return e<.5?.5*(1-Math.sqrt(1-e*e*4)):.5*(Math.sqrt(-(2*e-3)*(2*e-1))+1)},easeInElastic:function(e){return Math.sin(Math.PI/2*13*e)*Math.pow(2,10*(e-1))},easeOutElastic:function(e){return Math.sin(Math.PI/2*-13*(e+1))*Math.pow(2,-10*e)+1},easeInOutElastic:function(e){return e<.5?.5*Math.sin(Math.PI/2*13*(2*e))*Math.pow(2,10*(2*e-1)):.5*(Math.sin(Math.PI/2*-13*(2*e-1+1))*Math.pow(2,-10*(2*e-1))+2)},easeInBack:function(e){return e*e*e-e*Math.sin(e*Math.PI)},easeOutBack:function(e){var t=1-e;return 1-(t*t*t-t*Math.sin(t*Math.PI))},easeInOutBack:function(e){var t;return e<.5?.5*((t=2*e)*t*t-t*Math.sin(t*Math.PI)):.5*(1-((t=1-(2*e-1))*t*t-t*Math.sin(t*Math.PI)))+.5},easeInBounce:function(e){return 1-this.easeOutBounce(1-e)},easeOutBounce:function(e){return e<4/11?121*e*e/16:e<8/11?9.075*e*e-9.9*e+3.4:e<.9?4356/361*e*e-35442/1805*e+16061/1805:10.8*e*e-20.52*e+10.72},easeInOutBounce:function(e){return e<.5?.5*this.easeOutBounce(2*e):.5*this.easeOutBounce(2*e-1)+.5}},T.fn.animate=function(e,d,c,f){this.stop();var h=this,v=null,p={},g={};for(var t in e){var n=e[t];switch(t){case"step":w.isFunction(n)&&(v=n);break;case"margin-left":case"margin-top":case"margin-right":case"margin-bottom":case"padding-left":case"padding-top":case"padding-right":case"padding-bottom":p[t]={start:parseFloat(h.css(t)),end:parseFloat(n),unit:"px"};break;case"opacity":p[t]={start:parseFloat(h.css(t)),end:parseFloat(n),unit:""};break;case"color":case"background-color":g[t]={start:ve.Color(h.css(t)),end:ve.Color(n)};break;case"left":case"top":case"right":case"bottom":case"width":case"height":case"font-size":case"line-height":p[t]={start:parseFloat(h.css(t)),end:parseFloat(n),unit:w.toString(n).replace(/^\d+/,"")}}}var m=(new Date).getTime();!function e(){var t=(new Date).getTime()-m;var n=w.ensureRange(t/d,0,1);var i=y.hasOwnProperty(c)?y[c](n):n;for(var r in p){var a=p[r],o=(a.end-a.start)*i+a.start;h.css(r,o+a.unit)}for(var s in g){var l=g[s],u=ve.Color.mix(l.start,l.end,i,1);h.css(r,u.getRGBAColorString())}v&&v(n);n<1?this._uiAnimationTimer=setTimeout(e,10):(this.stop(),w.isFunction(f)&&f())}()},T.fn.stop=function(){this._uiAnimationTimer&&(clearTimeout(this._uiAnimationTimer),delete this._uiAnimationTimer)},T.fn.fadeIn=function(e,t){var n=this;n.css({display:"block",opacity:0}),n.animate({opacity:1},e,"linear",function(){n.css("opacity",""),w.isFunction(t)&&t()})},T.fn.fadeOut=function(e,t){var n=this;n.css({opacity:1}),n.animate({opacity:0},e,"linear",function(){n.css({display:"none",opacity:""}),w.isFunction(t)&&t()})},T.fn.fadeTo=function(e,t,n){this.animate({opacity:t},e,"linear",n)},T.fn.index=function(){for(var e=this.node.previousSibling,t=0;e;)e=e.previousSibling,t++;return t},T.fn.parent=function(){return T(this.node.parentNode)},window.jQuery&&(jQuery.fn.findAll=jQuery.fn.find),he=w.xQuery(),(ve=T).findAll=w.findAll,ve.toInt=w.toInt,ve.toFloat=w.toFloat,ve.toBoolean=w.toBoolean,ve.isString=w.isString,ve.toString=w.toString,ve.trim=w.trim,ve.isObject=w.isObject,ve.isEmptyObject=w.isEmptyObject,ve.toObject=w.toObject,ve.isArray=w.isArray,ve.toArray=w.toArray,ve.makeArray=w.makeArray,ve.isFunction=w.isFunction,ve.toFunction=w.toFunction,ve.format2Digit=w.format2Digit,ve.formatTime=w.formatTime,ve.ensureRange=w.ensureRange,ve.removeClassByPattern=w.removeClassByPattern,ve.getDeltaFromScrollEvent=w.getDeltaFromScrollEvent,ve.extend=w.extend,ve.textToHTML=w.textToHTML,ve.dumpJS=w.dumpJS,ve.dumpPHP=w.dumpPHP,ve.getProp=w.getProp,ve.setProp=w.setProp,ve.escapeProp=w.escapeProp,ve.validateEmail=w.validateEmail,ve.linkify=w.linkify,ve.stripHttpAndWwwFromUrl=w.stripHttpAndWwwFromUrl,ve.selectElementText=w.selectElementText,ve.scrollToElement=w.scrollToElement,ve.isVisible=w.isVisible,ve.download=w.download,ve.log10=w.log10,ve.log2=w.log2,ve.hypot=w.hypot,ve.randMax=w.randMax,ve.rand=w.rand,ve.srand=w.srand,a=[],he?(he(V),he(window).on("resize",V)):(window.addEventListener("load",V,!1),window.addEventListener("resize",V,!1)),ve.addResizeHandler=function(e,t,n){a.push({node:he?he(e)[0]:e,handler:t}),n&&t()},ve.removeResizeHandler=function(e){for(var t=[],n=he(e)[0],i=0;i<a.length;i++){var r=a[i];r.node!=n&&t.push(r)}a=t},o=[],he(window).on("scroll uiScroll",R),ve.addScrollHandler=function(e,t){o.push({node:he?he(e)[0]:e,handler:t})},ve.removeScrollHandler=function(e){for(var t=[],n=he?he(e)[0]:e,i=0;i<o.length;i++){var r=o[i];r.node!=n&&t.push(r)}o=t},ve.registerScrollEvent=function(e){var t=he?he(e)[0]:e,n=[];if(t){var i=window.getComputedStyle(t,null).getPropertyValue("overflow");for("auto"!=i&&"scroll"!=i&&"hidden"!=i||r(t),t=t.parentNode;t&&t!=document;)"auto"!=(i=window.getComputedStyle(t,null).getPropertyValue("overflow"))&&"scroll"!=i||r(t),t=t.parentNode}function r(e){e._uiScrollEventBinded?e._uiScrollEventBinded++:(he(e).on("scroll",R),e._uiScrollEventBinded=1,n.push(e))}return{unregister:function(){for(var e=0;e<n.length;e++){var t=n[e];t._uiScrollEventBinded&&(t._uiScrollEventBinded--,0==t._uiScrollEventBinded&&(he?he(t).off("scroll",R):t.removeEventListener("scroll",R),delete t._uiScrollEventBinded))}}}},s=[],(t=he(document)).on("mousedown",function(e){if(e.target==document.documentElement&&e.pageX>document.documentElement.clientWidth)return;j(e.target,!1)}),t.on("click",function(e){j(e.target,!0)}),ve.addPopup=function(e,t,n,i){var r=he?he(e)[0]:e;F(r),(t=ve.makeArray(t)).push(r),s.push({node:r,uiExclude:t,callback:n,closeOnClick:ve.toBoolean(i)})},ve.removePopup=F,ve.closeAllPopups=function(){for(var e=0,t=s.length;e<t;e++)W(s[e]);s=[]},i=!1,u=r=null,ve.dragAndDrop=function(e){var t=e.event.originalEvent||e.event;e.isTouchDragging=ve.toBoolean(t.touches),(e.isTouchDragging?function(n){if(u)return;var e=n.event;e.preventDefault(),delete n.event;var t=he((u=n).owner);t.on("touchmove",r),t.on("touchend",function e(){n.stopDragging&&n.stopDragging(n);t.off("touchmove",r);t.off("touchend",e);u=null});var i=e.originalEvent||e;n.pageX=i.touches[0].pageX,n.pageY=i.touches[0].pageY,n.startDragging&&n.startDragging(n);function r(e){var t=e.originalEvent||e;n.pageX=t.touches[0].pageX,n.pageY=t.touches[0].pageY,n.processDragging&&n.processDragging(n)}}:function(e){var t=e.event;if(1!=t.which||r)return;t.preventDefault(),delete e.event,function(){if(i)return;var e=he(document);e.on("mousemove",function(e){r&&r.processDragging&&(r.pageX=e.pageX,r.pageY=e.pageY,r.processDragging(r))}),e.on("mouseup",function(e){r&&(r.stopDragging&&(r.pageX=e.pageX,r.pageY=e.pageY,r.stopDragging(r)),r._overlayJQ.remove(),r=null)}),i=!0}(),r=e;var n=he('<div style="position: fixed; left: 0; top: 0; width: 100%; height: 100%; z-index: 9999; cursor: move; cursor: grab;">');he(document.body).append(n),e._overlayJQ=n,e.hasOwnProperty("cursor")&&n.css("cursor",e.cursor);e.hasOwnProperty("overlayClass")&&n.addClass(e.overlayClass);e.startDragging&&(e.pageX=t.pageX,e.pageY=t.pageY,e.startDragging(e))})(e)},c=!1,f={},ve.setStyles=function(e,t){ve.isArray(e)&&(e=e.join(", ")),t?f[e]=t:delete f[e]},ve.buildStyles=function(){c||(d=he('<style type="text/css"></style>'),he(document.body).prepend(d),c=!0);var e="";for(var t in f){e+=t+" { ";var n=f[t];for(var i in n)e+=i+": "+n[i]+"; ";e+="}\n"}d.html(e)},h=null,ve.showFileDialog=function(e,t){h&&(h.off("change"),h.remove()),h=he('<input type="file" style="display: none" />'),he(document.body).append(h),(e=ve.toObject(e)).hasOwnProperty("accept")&&h.attr("accept",ve.toString(ve.toArray(e.accept).join(", ")));var n=ve.toBoolean(e.multiple);n&&h.attr("multiple","multiple"),h.on("change",function(){ve.isFunction(t)&&this.files&&t(n?this.files:this.files[0])}),h.click()},ve.BinaryReader=function(e){var n=new Uint8Array(e),i=0,r=0,a=0;function o(e){a<e&&(r|=n[i++]<<a,a+=8);var t=r&(1<<e)-1;return r>>=e,a-=e,t}function s(e){for(var t=0;0<e;){var n=e%8;0==n&&(n=8),t|=o(n)<<e-n,e-=n}return t}return{eof:function(){return i>=n.length&&a<=0},readNumber:s,readInteger:function(e){var t=e%8;0==t&&(t=8);var n=o(t-1),i=o(1);return t<e&&(n=n<<e-t|s(e-t)),i&&(n=-1-(n^(1<<e-1)-1)),n},readString:function(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(s(8));return t}}},ve.BinaryWriter=function(){var n=[],i=0,r=0,a=0;function o(e,t){r|=e<<a,8<=(a+=t)&&(n[i++]=255&r,r>>=8,a-=8)}function s(e,t){for(;0<t;){var n=t%8;0==n&&(n=8),o(e>>t-n,n),e&=(1<<t-n)-1,t-=n}}return{writeNumber:s,writeInteger:function(e,t){var n=t%8;0==n&&(n=8);var i=0;e<0&&(e=-(i=1)-(e^(1<<t-1)-1)),o(e>>t-n,n-1),o(i,1),n<t&&s(e&(1<<t-n)-1,t-n)},writeString:function(e){for(var t=0;t<e.length;t++)o(e.charCodeAt(t),8)},getData:function(){return 0<a&&(n[i++]=r),new Uint8Array(n)}}},ve.initGraph=function(e,r,a){var t="string"==typeof e?he?he(e)[0]:document.querySelector(e):e instanceof he?e[0]:e;void 0!==r?(t.width=r,t.height=a):(r=t.width,a=t.height);var n=t.getContext("2d"),i=null,o=null;0<r&&0<a&&(i=n.getImageData(0,0,t.width,t.height),o=i.data);for(var s=[],l=0;l<a;l++)s.push(l*r*4);function f(e,t,n){var i;e<0||r<=e||t<0||a<=t||(i=s[t]+(e<<2),o[i]=n.r,o[i+1]=n.g,o[i+2]=n.b,o[i+3]=n.a)}function u(e,t,n,i){return{r:e,g:t,b:n,a:i}}function d(e,t,n){return{r:e,g:t,b:n,a:255}}return{width:r,height:a,ctx:n,clear:function(){for(var e=0;e<o.length;e++)o[e]=0},getPixel:function(e,t){if(e<0||r<=e||t<0||a<=t)return d(0,0,0);var n=s[t]+(e<<2);return u(o[n],o[n+1],o[n+2],o[n+3])},putPixel:f,line:function(e,t,n,i,r){e=Math.floor(e),t=Math.floor(t),n=Math.floor(n),i=Math.floor(i);var a=Math.abs(e-n),o=Math.abs(t-i),s=Math.max(a,o);if(f(e,t,r),0!=s)for(var l=Math.floor((n-e<<16)/s),u=Math.floor((i-t<<16)/s),d=e<<16,c=t<<16;s;)f((d+=l)>>16,(c+=u)>>16,r),s--},fillRect:function(e,t,n,i,r){for(var a=Math.floor(e),o=Math.floor(t),s=Math.floor(e+n),l=Math.floor(t+i),u=o;u<l;u++)for(var d=a;d<s;d++)f(d,u,r)},redraw:function(){i&&n.putImageData(i,0,0)},RGB:d,RGBA:u,webColor2RGB:function(e){return void 0!==ve.Color?ve.Color(e):(t=(e=ve.toString(e).toLowerCase()).match(/^[#]?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/))?d(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)):(t=e.match(/^rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+)\s*\)$/))?d(t[1],t[2],t[3]):(t=e.match(/^rgba\s*\(\s*(\d+),\s*(\d+),\s*(\d+),\s*(\d+(?:\.\d+)?)\s*\)$/))?u(t[1],t[2],t[3],255*ve.toFloat(t[4])):u(0,0,0,1);var t}}},ve.screenLocker={},n=ve.screenLocker,x=C=b=0,M=[],n.show=function(e){switch(0==b&&0==C&&0==x&&(v=he('<div class="ui-screen-locker ui-stuff">\t<div class="ui-screen-locker-state-inactive"></div>\t<div class="ui-screen-locker-state-busy"></div>\t<div class="ui-screen-locker-state-loading">\t\t<div class="ui-screen-locker-state-loading-spinner"></div>\t</div></div>'),he(document.body).append(v),v.on("click",function(e){e.preventDefault(),e.stopPropagation()}),p=v.find(".ui-screen-locker-state-loading"),g=v.find(".ui-screen-locker-state-busy"),m=v.find(".ui-screen-locker-state-inactive")),"busy"!=e&&"locked"!=e&&(e="loading"),M.push(e),e){case"loading":0==b&&(p.stop(),p.css({display:"block",opacity:0}),p.fadeTo(400,.5)),b++;break;case"busy":0==C&&g.show(),C++;break;case"locked":0==x&&m.show(),x++}},n.hide=function(){switch(M.pop()){case"loading":0==--b&&(p.stop(),p.fadeTo(200,0,function(){p.hide(),N()}));break;case"busy":0==--C&&(g.hide(),N());break;case"locked":0==--x&&(m.hide(),N())}},ve.fn.ScrollBox=function(e){var u=he(this),t=u.data("UIScrollBox");if(t)return t.update(e),t;u.addClass("ui-scroll-box"),u.addClass("ui-stuff");var d=he(window),c=null,f=null,h=null;!function(){var e,t=u[0].childNodes,n=[];for(e=0;e<t.length;e++)n.push(t[e]);for(c=he('<div class="ui-scroll-content"></div>'),u.append(c),f=he('<div class="ui-v-area">\t<div class="ui-v-rail"></div>\t<div class="ui-v-bar-area">\t\t<div class="ui-v-bar"></div>\t</div></div>'),u.append(f),h=he('<div class="ui-h-area">\t<div class="ui-h-rail"></div>\t<div class="ui-h-bar-area">\t\t<div class="ui-h-bar"></div>\t</div></div>'),u.append(h),e=0;e<n.length;e++)he(n[e]).detach().appendTo(c)}();var v=f.find(".ui-v-bar-area"),p=h.find(".ui-h-bar-area"),o=!1,s=!1,g=0,m=0,w=0,y=0,b=0,P=0,C=0,x=0,M=16,z=!1,l=null;function n(e){var t,n,i,r,a,o=!1;(e=ve.toObject(e)).hasOwnProperty("width")&&(t=ve.toInt(e.width),u.css("width",t?t+"px":""),o=!0),e.hasOwnProperty("height")&&(n=ve.toInt(e.height),c.css("height",n?n+"px":""),o=!0),e.hasOwnProperty("maxWidth")&&(i=ve.toInt(e.maxWidth),u.css("max-width",i?i+"px":""),o=!0),e.hasOwnProperty("maxHeight")&&(r=ve.toInt(e.maxHeight),c.css("max-height",r?r+"px":""),o=!0),e.hasOwnProperty("barSize")&&(C=ve.toInt(e.barSize),x=C,o=!0),e.hasOwnProperty("vBarSize")&&(C=ve.toInt(e.vBarSize),o=!0),e.hasOwnProperty("hBarSize")&&(x=ve.toInt(e.hBarSize),o=!0),e.hasOwnProperty("vBarSize")&&(C=ve.toInt(e.vBarSize),o=!0),e.hasOwnProperty("minBarSize")&&(M=ve.toInt(e.minBarSize),o=!0),e.hasOwnProperty("hBarFixed")&&(z=ve.toBoolean(e.hBarFixed),o=!0),e.hasOwnProperty("skin")&&(a=ve.trim(e.skin),ve.removeClassByPattern(u,"ui-scroll-box-*-skin"),""!=a&&u.addClass("ui-scroll-box-"+a+"-skin"),o=!0),e.hasOwnProperty("onScroll")&&(l=e.onScroll,ve.isFunction(l)||(l=null)),o&&S()}function S(){0!=u[0].offsetWidth&&(u.removeClass("ui-with-h-scroll"),u.removeClass("ui-with-v-scroll"),s=o=!1,c[0].scrollWidth>c[0].clientWidth&&(u.addClass("ui-with-h-scroll"),s=!0),c[0].scrollHeight>c[0].clientHeight&&(u.addClass("ui-with-v-scroll"),o=!0),I())}function I(){var e,t,n,i,r,a,o,s,l;0!=u[0].offsetWidth&&(g=c[0].scrollWidth,m=c[0].scrollHeight,w=c[0].clientWidth,y=c[0].clientHeight,b=Math.min(c.scrollLeft(),g-w),P=Math.min(c.scrollTop(),m-y),0==g&&(g=1),0==m&&(m=1),(e=C)<=0&&f[0].offsetHeight*y/m<M&&(e=M),(t=x)<=0&&h[0].offsetWidth*w/g<M&&(t=M),e<=0?v.css({top:100*P/m+"%",height:100*y/m+"%"}):(n=f[0].offsetHeight,i=P*(n-e)/(m-y),v.css({top:100*i/n+"%",height:100*e/n+"%"})),t<=0?p.css({left:100*b/g+"%",width:100*w/g+"%"}):(r=h[0].offsetWidth,a=b*(r-t)/(g-w),p.css({left:100*a/r+"%",width:100*t/r+"%"})),z?(o=d.scrollTop()+d.innerHeight()-h[0].offsetHeight,l=(s=u.offset().top)+y-h[0].offsetHeight,s<o&&o<l?h.css("bottom",l-o+"px"):h.css("bottom","")):h.css("bottom",""))}function i(e,t){var n,i,r,a;t?o&&(e.preventDefault(),e.stopPropagation(),n=e.originalEvent||e,i=ve.getDeltaFromScrollEvent(n),(r=ve.ensureRange(P-i.y,0,m-y))!=P&&c.scrollTop(r),I()):s&&(e.preventDefault(),e.stopPropagation(),n=e.originalEvent||e,i=ve.getDeltaFromScrollEvent(n),(a=ve.ensureRange(b-i.y,0,g-w))!=b&&c.scrollLeft(a),I())}n(e),S(),ve.addResizeHandler(u,S),ve.addScrollHandler(u,I),c.on("wheel mousewheel",function(e){i(e,!0)}),f.on("wheel mousewheel",function(e){i(e,!0)}),h.on("wheel mousewheel",function(e){i(e,!1)}),f.on("mousedown touchstart",function(e){var t,n,i=he(e.target);ve.dragAndDrop({event:e,owner:this,cursor:he(this).css("cursor"),startDragging:function(e){f.addClass("ui-v-dragging"),i.hasClass("ui-v-bar-area")||0!=i.closest(".ui-v-bar-area").length||(P=(e.pageY-v.outerHeight()/2-f.offset().top)/(f.outerHeight()-v.outerHeight())*(m-y),c.scrollTop((e.pageY-v.outerHeight()/2-f.offset().top)/(f.outerHeight()-v.outerHeight())*(m-y)),I()),t=P,n=e.pageY},processDragging:function(e){c.scrollTop(t+(e.pageY-n)/(f.outerHeight()-v.outerHeight())*(m-y)),I()},stopDragging:function(){f.removeClass("ui-v-dragging")}})}),h.on("mousedown touchstart",function(e){var t,n,i=he(e.target);ve.dragAndDrop({event:e,owner:this,cursor:he(this).css("cursor"),startDragging:function(e){h.addClass("ui-h-dragging"),i.hasClass("ui-h-bar-area")||0!=i.closest(".ui-h-bar-area").length||(c.scrollLeft((e.pageX-p.outerWidth()/2-h.offset().left)/(h.outerWidth()-p.outerWidth())*(g-w)),I()),t=b,n=e.pageX},processDragging:function(e){c.scrollLeft(t+(e.pageX-n)/(h.outerWidth()-p.outerWidth())*(g-w)),I()},stopDragging:function(){h.removeClass("ui-h-dragging")}})}),c.on("scroll",function(){u.trigger("uiScroll"),l&&l()});var r={update:n,resize:S,scrollLeft:function(){return c.scrollLeft()},scrollTop:function(){return c.scrollTop()},scrollWidth:function(){return c[0].scrollWidth},scrollHeight:function(){return c[0].scrollHeight},clientWidth:function(){return c[0].clientWidth},clientHeight:function(){return c[0].clientHeight},destroy:function(){for(var e=c[0].childNodes,t=[],n=0;n<e.length;n++)t.push(e[n]);for(n=0;n<t.length;n++)he(t[n]).detach().appendTo(u);u.removeClass("ui-scroll-box"),u.removeClass("ui-stuff"),f.remove(),c.remove(),h.remove(),ve.removeResizeHandler(u),ve.removeScrollHandler(u),u.removeData("UIScrollBox"),delete u[0].uiInterface}};return u.data("UIScrollBox",r),u[0].uiInterface=r},ve.openDropdown=function(e,t,n,i){var _,Q,r,a,X,o,l,u,G,Y,$,Z,d,J,K,c,f,h,v,s,ee,te,ne,p,g,ie,re,ae,m,oe=he(e),w=oe.data("UIDropdown");function y(e){for(var t=ve.trim(e).split(" "),n=0;n<t.length;n++){var i,r,a=t[n];if("tooltip-"==a.substr(0,8)){ve.removeClassByPattern(Q,"ui-dropdown-*-skin");var o=a.substr(8);Q.addClass("ui-dropdown-"+o+"-skin")}else if("box-"==a.substr(0,4))l=a.substr(4);else if("arrow-"==a.substr(0,6))u="on"==a.substr(6),Q.toggleClass("ui-dropdown-with-arrow",u);else if("to-"==a.substr(0,3))G=a.substr(3);else if("width-"==a.substr(0,6)){var s=a.substr(6);switch(s){case"auto":case"full":Y=s;break;default:Y="fixed",$=ve.toInt(s)}}else{"max-height-"==a.substr(0,11)?Z=ve.toInt(a.substr(11)):"margin-"==a.substr(0,7)?d=ve.toInt(a.substr(7)):"v-padding-"==a.substr(0,10)?J=ve.toInt(a.substr(10)):"anim-in-"==a.substr(0,8)?(i=a.substr(8).split("-"),c=i[0],f=ve.toInt(i[1])||("none"==c?0:100)):"anim-out-"==a.substr(0,9)&&(r=a.substr(9).split("-"),h=r[0],v=ve.toInt(r[1])||("none"==h?0:100))}}}function b(){var e,t,n=_.scrollLeft(),i=_.scrollTop(),r=_.innerWidth(),a=_.innerHeight(),o=oe.offset(),s=o.left-n,l=o.top-i,u=oe.outerHeight(),d=oe.outerWidth();0==$&&Q.css("width",""),"full"==Y&&Q.css("min-width",d+"px"),0<$?(t=Math.min($,r-4),Q.outerWidth(t)):(e=Q.outerWidth(),(t=Math.min(e,r-4))<e&&Q.outerWidth(t)),ne.resize();var c=Q[0].offsetHeight-te[0].offsetHeight,f=ne.scrollHeight()+c;Z&&Z<f&&(f=Z);var h=l-re-2,v=_.innerHeight()-l-u-re-2,p="",g=0,m=0,w="",y=0,b=0;function P(){return 2<=g&&2<=m&&g+t<=r-2&&m+f<=a-2}function C(){var e=n(s,s+d-1,2,r-2-1),t=n(l,l+u-1,2,a-2-1);function n(e,t,n,i){return e<n&&n<t||e<i&&i<t}return e||t}function x(){Z&&(k(!1),P()||V(!1),P())||(h<v?k:V)(!0)}function M(){Z&&(V(!1),P()||k(!1),P())||(h<v?k:V)(!0)}function z(){Z&&(A(!1),P()||R(!1),P())||(h<v?A:R)(!0)}function S(){Z&&(R(!1),P()||A(!1),P())||(h<v?A:R)(!0)}function I(){F(!1),P()||W(!1),P()||(h<v?F:W)(!0)}function D(){W(!1),P()||F(!1),P()||(h<v?F:W)(!0)}function O(){L(),P()||j(),P()||q()}function E(){j(),P()||L(),P()||H()}function q(){p="right",g=s+d+re,m=l-J,y=0,b=u/2+J,U(),P()&&!C()||x()}function T(){p="right",g=s+d+re,m=l+u-f+J,y=0,b=f-u/2-J,U(),P()&&!C()||M()}function H(){p="left",g=s-re-t,m=l-J,y=0,b=u/2+J,U(),P()&&!C()||z()}function B(){p="left",g=s-re-t,m=l+u-f+J,y=0,b=f-u/2-J,U(),P()&&!C()||S()}function k(e){e&&(f=v),p="bottom",y=s+t+2<r||s-t<2?(g=s,m=l+u+re,ae):(g=s+d-t,m=l+u+re,t-ae),b=0,N()}function V(e){e&&(f=Math.min(f,h)),p="top",y=s+t+2<r||s-t<2?(g=s,m=l-re-f,ae):(g=s+d-t,m=l-re-f,t-ae),b=0,N()}function A(e){e&&(f=v),p="bottom",y=2<=s+d-t||s-t<2?(g=s+d-t,m=l+u+re,t-ae):(g=s,m=l+u+re,ae),b=0,N()}function R(e){e&&(f=Math.min(f,h)),p="top",y=2<=s+d-t||s-t<2?(g=s+d-t,m=l-re-f,t-ae):(g=s,m=l-re-f,ae),b=0,N()}function F(e){p="bottom",g=s+(d-t)/2,m=l+u+re,y=t/2,b=0,e&&(f=a-2-m-1),N()}function W(e){p="top",g=s+(d-t)/2,m=l-re-f,y=t/2,b=0,e&&(f=l-re-(m=2)),N()}function L(){p="right",g=s+d+re,m=l+(u-f)/2,y=0,b=f/2,U()}function j(){p="left",g=s-ie-t,m=l+(u-f)/2,y=0,b=f/2,U()}function U(){var e=m;a-1-2<m+f&&(m=a-1-2-f),m<2&&(m=2,f=Math.min(f,a-4)),b=b+e-m}function N(){r-2<=g+t&&(y=g-(g=r-2-t-1)+d/2),g<2&&(y=s-(g=2)+d/2)}({"bottom-right":x,"top-right":M,"bottom-left":z,"top-left":S,"bottom-center":I,"top-center":D,"right-center":O,"left-center":E,"right-bottom":q,"right-top":T,"left-bottom":H,"left-top":B})[G](),K?w="fixed":(w="absolute",document.fullscreenElement||(g+=n,m+=i)),Q.css({display:ve.isVisible(oe)?"block":"none",position:w,left:g+"px",top:m+"px"}),ne.update({maxHeight:f-c}),X.css("left",y?y-ie+"px":""),X.css("top",b?b-ie+"px":""),ee!=p&&(Q.removeClass("ui-dropdown-align-"+ee),Q.addClass("ui-dropdown-align-"+p),ee=p)}function P(){var e;Q&&(ve.removeResizeHandler(r),ve.removeScrollHandler(r),oe.removeData("UIDropdown"),r.removeData("UIDropdown"),oe.removeClass("ui-expanded"),Q.off(),0<v?(K=!0,b(),e=Q,Q=null,e.addClass("ui-dropdown-locked"),e.addClass("ui-dropdown-animation-out-"+h),setTimeout(function(){o.css("transition","all "+v+"ms linear"),e.addClass("ui-dropdown-animating"),setTimeout(function(){ve.isFunction(s)&&s(r),ne.destroy(),e.remove()},v)},1)):(ve.isFunction(s)&&s(r),ne.destroy(),Q.remove(),Q=null))}w?w.close():(_=he(window),Q=he('<div class="ui-dropdown ui-stuff">\t<div class="ui-dropdown-animation-box">\t\t<div class="ui-dropdown-arrow">\t\t\t<div class="ui-dropdown-arrow-bg"></div>\t\t\t<div class="ui-dropdown-arrow-fg"></div>\t\t</div>\t\t<div class="ui-dropdown-frame"></div>\t</div></div>'),document.fullscreenElement?he(document.fullscreenElement).append(Q):he(document.body).append(Q),(r=he(t).first()).parent().length&&(r=r.clone()),r.show(),(a=Q.find(".ui-dropdown-frame")).append(r),oe.addClass("ui-expanded"),X=Q.find(".ui-dropdown-arrow"),o=Q.find(".ui-dropdown-animation-box"),K=u=!1,h=c="none",v=f=J=d=Z=$=0,s=null,ee=Y=G=l="",y("tooltip-generic box-generic arrow-on to-bottom-right width-full max-height-auto"),y(r.attr("data-ui-dropdown")),0==(te=Q.find("[data-ui-dropdown-box]")).length&&(te=a),ne=ve(te).ScrollBox({skin:l}),0<f&&(K=!0,Q.addClass("ui-dropdown-animation-in-"+c),setTimeout(function(){Q&&(o.css("transition","all "+f+"ms linear"),Q.addClass("ui-dropdown-animating"),setTimeout(function(){Q&&(Q.removeClass("ui-dropdown-animation-in-"+c),Q.removeClass("ui-dropdown-animating"),o.css("transition",""),K=!1,b())},f))},1)),ve.addResizeHandler(r,b),ve.addScrollHandler(r,b),i=ve.toObject(i),(p=ve.makeArray(i.uiExclude)).push(oe),p.push(Q),ve.addPopup(r,p,P),ve.isFunction(n)&&(n(r,g={onClose:null}),s=g.onClose),ie=u?ve.toInt(X.css("height")):0,re=ie+d,ae=ve.toInt(X.css("width"))||16,b(),m={close:P},oe.data("UIDropdown",m),r.data("UIDropdown",m))},z=!(ve.closeDropdown=function(e){var t,n=he(e);0==n.length||(t=n.data("UIDropdown"))&&t.close()}),P.dspEQPresets=[{title:"Default",bands:[0,0,0,0,0,0,0,0,0,0]},{title:"Classical",bands:[0,0,0,0,0,0,-7.2,-7.2,-7.2,-9.6]},{title:"Club",bands:[0,0,9,5.6,5.6,5.6,3.2,0,0,0]},{title:"Dance",bands:[9.6,7.2,2.4,0,0,-5.6,-7.2,-7.2,0,0]},{title:"Full Bass",bands:[9.6,9.6,9.6,5.6,1.6,-4,-8,-10.4,-11.2,-11.2]},{title:"Full Bass & Treble",bands:[7.2,5.6,0,-7.2,-4.8,1.6,8,11.2,12,12]},{title:"Full Treble",bands:[-9.6,-9.6,-9.6,-4,2.4,11.2,16,16,16,16.8]},{title:"Laptop Speakers / Headphones",bands:[4.8,11.2,5.6,-3.2,-2.4,1.6,4.8,9.6,12.8,14.4]},{title:"Large Hall",bands:[10.4,10.4,5.6,5.6,0,-4.8,-4.8,-4.8,0,0]},{title:"Live",bands:[-4.8,0,4,5.6,5.6,5.6,4,2.4,2.4,2.4]},{title:"Party",bands:[7.2,7.2,0,0,0,0,0,0,7.2,7.2]},{title:"Pop",bands:[-1.6,4.8,7.2,8,5.6,0,-2.4,-2.4,-1.6,-1.6]},{title:"Reggae",bands:[0,0,0,-5.6,0,6.4,6.4,0,0,0]},{title:"Rock",bands:[8,4.8,-5.6,-8,-3.2,4,8.8,11.2,11.2,11.2]},{title:"Ska",bands:[-2.4,-4.8,-4,0,4,5.6,8.8,9.6,11.2,9.6]},{title:"Soft",bands:[4.8,1.6,0,-2.4,0,4,8,9.6,11.2,12]},{title:"Soft Rock",bands:[4,4,2.4,0,-4,-5.6,-3.2,0,2.4,8.8]},{title:"Techno",bands:[8,5.6,0,-5.6,-4.8,0,8,9.6,9.6,8.8]}],P.dspEQFreqs=[70,180,320,600,1e3,3e3,6e3,12e3,14e3,16e3],I=_(),D=[],(S=A={}).registerActiveInstance=function(e){K(e);var t=D.length;D.push(e),0==t&&1==D.length&&I.triggerMediaEvent("onPlay")},S.unregisterActiveInstance=K,S.bindEventsHandler=I.bindEventsHandler,S.unbindEventsHandler=I.unbindEventsHandler,S.getVisualData=function(e,t,n,i){if(e)return e.getVisualData(t,n,i);for(var r=ee(t),a=0;a<D.length;a++)for(var o=D[a].getVisualData(t,n,i),s=0;s<o.length;s++)r[s]+=o[s];for(var l=0;l<t;l++)r[s]/=D.length;return r},S.getSpectrumData=function(e,t,n,i){if(e)return e.getSpectrumData(t,n,i);for(var r=ee(t),a=0;a<D.length;a++)for(var o=D[a].getSpectrumData(t,n,i),s=0;s<o.length;s++)r[s]+=o[s];for(var l=0;l<t;l++)r[s]/=D.length;return r},S.getVU=function(e,t,n,i){if(e)return e.getVU(t,n,i);if(0==D.length)return-40;for(var r=0,a=0;a<D.length;a++)r+=D[a].getVU(t,n,i);return r/D.length},S.suspendAll=function(){for(var e=D,t=0;t<e.length;t++)e[t].pause()},P.MediaEngine=ve.MediaEngine=function(e){e=ve.toObject(e);ve.toString(e.api);return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"webaudio"==e.api?ne():te(e)},ve.fn.Spectrum=function(e){var t=he(this),n=t.data("UISpectrum");if(n)return e&&n.update(e),n;var i=he('<div class="ui-spectrum ui-stuff">\t<canvas class="ui-spectrum-canvas"></canvas></div>');t.append(i);var r=i.find(".ui-spectrum-canvas")[0],a=r.getContext("2d"),o=null,s="#4fcb1d",l=[],u=50,d=!1,c=(e=ve.toObject(e)).player;if(c){c.initPlugin({dsp:!0,vis:!0}),c.bindEventsHandler(function(e){var t=f[e.name];ve.isFunction(t)&&t(e)}),m(e),g(),ve.addResizeHandler(i,g),c.isPaused()||v();var f={onPause:function(){!function(){if(p(),!o)return;clearInterval(o),o=null}(),d=!1},onPlay:function(){v(),d=!0},onComplete:function(){for(var e=0;e<l.length;e++)l[e]=0;p()}},h={update:m,destroy:function(){o&&clearInterval(o),ve.removeResizeHandler(i,g),t.removeData("UISpectrum"),i.remove()}};return t.data("UISpectrum",h),h}function v(){o||(p(),o=setInterval(p,40))}function p(){r.width=r.parentNode.offsetWidth,r.height=u,function(){var e=Math.pow(2,1+Math.ceil(ve.log2(r.width)));if(e>l.length){var t=l.length;l.length=e;for(var n=t;n<e;n++)l[n]=0}else l.length=e}();for(var e=c.getSpectrumData(l.length,0),t=0;t<l.length;t++)l[t]=2*l[t]/3,e[t]>l[t]&&(l[t]=e[t]);a.clearRect(0,0,r.width,r.height),a.beginPath();for(var n=0;n<r.width;n++){var i=5*l[Math.floor(n*l.length/r.width/3)],i=Math.sqrt(i*r.height);a.moveTo(n,r.height-i*u/100),a.lineTo(n,r.height)}a.strokeStyle=s,a.stroke()}function g(){d||p()}function m(e){e=ve.toObject(e)}},ve.fn.MediaPlayer=function(e){var t=he(this),n=t.data("UIMediaPlayer");if(n)return e&&n.update(e),n;pe();var c=e.player;c.initPlugin({dsp:!0});var a=he('<div class="ui-media-player ui-stuff ui-non-selectable ui-media-player-style-generic">\t<div class="ui-media-player-spectrum"></div>\t<div class="ui-media-player-video"></div>\t<div class="ui-media-player-panel-container">\t\t<div class="ui-media-player-panel">\t\t\t<div class="ui-media-player-left-panel">\t\t\t\t<div class="ui-media-player-control-buttons">\t\t\t\t\t<div class="ui-media-player-play-button">\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\t\t\t\t\t</div>\t\t\t\t\t<div class="ui-media-player-pause-button">\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="ui-media-player-progress">\t\t\t\t<div class="ui-media-player-progress-line">\t\t\t\t\t<div class="ui-media-player-progress-value"></div>\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="ui-media-player-right-panel">\t\t\t\t<div class="ui-media-player-time-bar">0:00 / 0:00</div>\t\t\t\t<div class="ui-media-player-visualization-panel">\t\t\t\t\t<div class="ui-media-player-visualization-box"><canvas width="64" height="20"></canvas></div>\t\t\t\t</div>\t\t\t\t<div class="ui-media-player-volume-panel">\t\t\t\t\t<div class="ui-media-player-volume-icon">\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\t\t\t\t\t</div>\t\t\t\t\t<div class="ui-media-player-no-volume-icon">\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\t\t\t\t\t</div>\t\t\t\t\t<div class="ui-media-player-volume-line">\t\t\t\t\t\t<div class="ui-media-player-volume-value"></div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t\t<div class="ui-media-player-full-screen-panel">\t\t\t\t\t<div class="ui-media-player-full-screen-button">\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 5v4h2V5h4V3H5c-1.1 0-2 .9-2 2zm2 10H3v4c0 1.1.9 2 2 2h4v-2H5v-4zm14 4h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4zm0-16h-4v2h4v4h2V5c0-1.1-.9-2-2-2z"/></svg>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>\t\t</div>\t</div></div>');t.append(a);var o=a.find(".ui-media-player-video"),i=a.find(".ui-media-player-panel"),r=a.find(".ui-media-player-progress-line"),s=a.find(".ui-media-player-progress-value"),l=a.find(".ui-media-player-time-bar"),u=a.find(".ui-media-player-volume-value"),d=a.find(".ui-media-player-right-panel"),f=a.find(".ui-media-player-spectrum"),h=ve.initGraph(a.find(".ui-media-player-visualization-panel canvas")),v=null,p=null,g=null,m=null,w=0,y=!1,b="#c0c0c0",P=null,C=null,x=!1,M=!1,z="#4fcb1d",S=null,I=!1,D="#4fcb1d",O=50;function E(e){var t,n,i=!1,r={};if((e=ve.toObject(e)).hasOwnProperty("lineColor")&&(b=ve.trim(e.lineColor),a.find(".ui-media-player-progress-value").css("background-color",b),a.find(".ui-media-player-volume-value").css("background-color",b),B()),e.hasOwnProperty("visType")&&(w=ve.toInt(e.visType),B()),e.hasOwnProperty("mode"))switch(e.mode){case"pro":e.proMode=!0;break;case"full":e.proMode=!1,e.hideTimeBar=!1,e.hideVisualization=!1,e.hideVolumeBar=!1;break;case"normal":e.proMode=!1,e.hideTimeBar=!1,e.hideVisualization=!0,e.hideVolumeBar=!1;break;case"minimal":e.proMode=!1,e.hideTimeBar=!0,e.hideVisualization=!0,e.hideVolumeBar=!0}e.hasOwnProperty("proMode")&&(M=!(!ve.toBoolean(e.proMode)||!U.c())&&(e.hideTimeBar=!1,e.hideVisualization=!1,!(e.hideVolumeBar=!1))),e.hasOwnProperty("hideTimeBar")&&(a.toggleClass("ui-media-player-without-time-bar",ve.toBoolean(e.hideTimeBar)),i=!0),e.hasOwnProperty("hideVisualization")&&(y=ve.toBoolean(e.hideVisualization),a.toggleClass("ui-media-player-without-visualization",y),y&&m&&V(),y||m||(c.isPaused()?B:H)(),i=!0),e.hasOwnProperty("hideVolumeBar")&&(a.toggleClass("ui-media-player-without-volume-panel",ve.toBoolean(e.hideVolumeBar)),i=!0),e.hasOwnProperty("hidePlayButton")&&(a.toggleClass("ui-media-player-without-play-button",ve.toBoolean(e.hidePlayButton)),i=!0),e.hasOwnProperty("equalizerColor")&&(z=e.equalizerColor),e.hasOwnProperty("onPause")&&(P=e.onPause),e.hasOwnProperty("onPlay")&&(C=e.onPlay),e.hasOwnProperty("showVideo")&&(t=e.showVideo,ve.toBoolean(t)?c.setVideoOwner(o):c.setVideoOwner(null)),e.hasOwnProperty("style")&&(function e(t){t=ve.toString(t);ve.removeClassByPattern(a,"ui-media-player-style-*");switch(t){case"generic":case"translucent":a.addClass("ui-media-player-style-"+t);break;default:e("generic")}}(e.style),i=!0),e.hasOwnProperty("reverseTime")&&(x=ve.toBoolean(e.reverseTime),R(),i=!0),e.hasOwnProperty("width")&&(n=ve.toInt(e.width),a.css("width",n?n+"px":"")),e.hasOwnProperty("spectrumEnabled")&&(!(I=ve.toBoolean(e.spectrumEnabled))&&S&&(S.destroy(),S=null),I&&!S&&(S=ve(f).Spectrum({player:c}),r={color:D,height:O})),!ve.isEmptyObject(r)&&S&&S.update(r),i&&A()}E(e),A(),B(),ve.addResizeHandler(a,A),c.bindEventsHandler(T),a.on("click",".ui-media-player-play-button",function(){c.play()}),a.on("click",".ui-media-player-pause-button",function(){c.pause()}),a.on("mousedown touchstart",".ui-media-player-progress-line",function(e){var i;0!=c.getDuration()&&(i=he(this),ve.dragAndDrop({event:e,owner:i,cursor:"pointer",processDragging:function(e){var t=e.pageX-i.offset().left,t=ve.ensureRange(t,0,i.outerWidth()),n=c.getDuration()*t/i.outerWidth();L(e.pageX,e.pageY,i)?function(e,t){var a=he(e),n=a.data("UIMediaPlayerProgressHint");if(n)return n.update(t);var o=he('<div class="ui-media-player-progress-hint ui-stuff">\t<div class="ui-media-player-progress-hint-frame">\t\t<div class="ui-media-player-progress-hint-helper">\t\t\t<div class="ui-media-player-progress-hint-helper-bg"></div>\t\t\t<div class="ui-media-player-progress-hint-helper-fg"></div>\t\t</div>\t</div>\t<div class="ui-media-player-progress-hint-text"></div></div>');document.fullscreenElement?he(document.fullscreenElement).append(o):he(document.body).append(o);var s=he(window),i=o.find(".ui-media-player-progress-hint-text"),l=o.find(".ui-media-player-progress-hint-helper"),u=0,d=l.outerHeight();function r(e){(e=ve.toObject(e)).hasOwnProperty("position")&&(u=ve.toInt(e.position)),e.hasOwnProperty("text")&&i.text(ve.toString(e.text)),c()}function c(){var e=o.outerWidth(),t=o.outerHeight(),n=a.offset().left+u-e/2,i=a.offset().top-t-d,r=!1;i<s.scrollTop()&&(r=!0,i=a.offset().top+a.outerHeight()+d),r?o.addClass("ui-media-player-progress-hint-to-bottom"):o.addClass("ui-media-player-progress-hint-to-top"),n-=s.scrollLeft(),i-=s.scrollTop(),o.css({left:n+"px",top:i+"px"}),l.css("margin-left",-l.width()/2+"px")}r(t),o.fadeIn(200),c(),a.data("UIMediaPlayerProgressHint",{update:r,close:function(){a.removeData("UIMediaPlayerProgressHint"),o.fadeOut(200,function(){o.remove()})}})}(i,{text:c.formatTime(n),position:t}):W(i)},stopDragging:function(e){W(i),L(e.pageX,e.pageY,i)&&c.seek(e.pageX-i.offset().left,i.outerWidth())}}))}),a.on("click",".ui-media-player-volume-icon",function(){c.setMuted(!0)}),a.on("click",".ui-media-player-no-volume-icon",function(){c.setMuted(!1)}),a.on("mousedown touchstart",".ui-media-player-volume-line",function(e){c.setMuted(!1);var n=he(this);function t(e){var t=(e.pageX-n.offset().left)/n.outerWidth();c.setVolume(t)}ve.dragAndDrop({event:e,owner:n,cursor:"pointer",startDragging:t,processDragging:t})}),a.on("click",".ui-media-player-time-bar",function(){x=!x,R(),A()}),a.on("click",".ui-media-player-visualization-box",function(){var e;M?(e=he('<div class="ui-media-player-equalizer-dropdown ui-stuff" data-ui-dropdown="tooltip-generic box-generic arrow-off to-bottom-center width-612 margin-4 anim-in-slide anim-out-slide"></div>'),ve.openDropdown(i,e,function(e,t){ve(e).Equalizer({player:c,color:z,visType:w,onSelectVis:function(e){w=e.visType,B()}}),t.onClose=function(){ve(e).destroy()}})):(w=(w+1)%3,B())}),a.on("click",".ui-media-player-full-screen-button",function(){ve.closeAllPopups(),F()}),a.on("dblclick",".ui-media-player-video",function(e){ve.closeAllPopups(),F()}),a.on("dblclick",".ui-media-player-panel-container",function(e){e.target==this&&(ve.closeAllPopups(),F())});var q={onLoad:function(){a.toggleClass("ui-media-player-enable-duration",0<c.getDuration()),a.toggleClass("ui-media-player-with-video",c.hasVideo())},onProgress:function(){var e=c.getDuration(),t=0<e?100*c.getPosition()/e:0;s.css("width",t+"%"),R(),A()},onPause:function(){a.removeClass("ui-media-player-playing"),V(),ve.isFunction(P)&&P()},onPlay:function(){a.addClass("ui-media-player-playing"),H(),ve.isFunction(C)&&C()},onVolumeChange:function(){var e=ve.ensureRange(c.getVolume(),0,1);u.css("width",100*e+"%"),a.toggleClass("ui-media-player-muted",c.getMuted())},onVisualDataLoad:function(){c.isPaused()||H()},onComplete:function(){V()}};function T(e){var t=q[e.name];ve.isFunction(t)&&t(e)}function H(){m||y||(m=setInterval(function(){B()},40))}function B(){(0==w?function(){var e=0,t=0,n=c.getVisualData(4*h.width,0);h.clear();var i=h.webColor2RGB(b);if(m&&0<n.length)for(var r=0,a=Math.min(4*h.width,n.length);r<a;r++){var o=10-10*n[4*r];0<r&&h.line(e,t,r,o,i),e=r,t=o}else{var s=h.height/2;h.line(0,s,h.width,s,i)}h.redraw()}:1==w?function(){v=v||k(h.width);for(var e=c.getSpectrumData(2*v.length,0),t=h.webColor2RGB(b),n=0,i=Math.min(v.length,e.length);n<i;n++)v[n]-=.4,e[n]>v[n]&&(v[n]=e[n]);if(h.clear(),m&&0<e.length)for(var r=0;r<v.length;r++){var a=7*v[r];h.line(r,h.height-a,r,h.height-1,t)}else h.line(0,h.height-1,h.width,h.height-1,t);h.redraw()}:function(){var e,t,n=6,i=.5;p||(p=k(21),g=k(21));var r=c.getSpectrumData(128,0),a=h.webColor2RGB(b);for(e=0,t=Math.min(21,r.length);e<t;e++)p[e]-=.35,r[e]>p[e]&&(p[e]=r[e]),g[e]-=.08,r[e]>g[e]&&(g[e]=r[e]);if(h.clear(),m&&0<r.length)for(e=0;e<21;e++){var o=d(p[e]),s=h.height-1-o,l=3*e;h.fillRect(l,s,2,o,a);var u=h.height-1-d(g[e]);h.line(l,u,2+l-1,u,a)}else for(e=0;e<21;e++)h.line(3*e,h.height-2,3*e+2-1,h.height-2,a);function d(e){return e*n*(1-i)+Math.sqrt(e*h.height*n)*i}h.redraw()})()}function k(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function V(){m&&(clearInterval(m),m=null,B())}function A(){a.removeClass("ui-m1"),a.removeClass("ui-m2"),a.removeClass("ui-m3"),i.css("padding-right",d.width()+"px"),r.outerWidth()<120&&(a.addClass("ui-m1"),i.css("padding-right",d.width()+"px")),r.outerWidth()<120&&(a.addClass("ui-m2"),i.css("padding-right",d.width()+"px")),r.outerWidth()<120&&(a.addClass("ui-m3"),i.css("padding-right",d.width()+"px"))}function R(){var e=c.getPosition(),t=c.getDuration();0<t?x?l.text("-"+c.formatTime(t-e)+" / "+c.formatTime(t)):l.text(c.formatTime(e)+" / "+c.formatTime(t)):l.text(c.formatTime(e))}function F(){var e=a[0];document.fullscreenElement!=e?(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):element.msRequestFullscreen&&e.msRequestFullscreen(),a.addClass("ui-media-player-full-screen"),ve.addResizeHandler(o,function(){document.fullscreenElement!=e&&(a.removeClass("ui-media-player-full-screen"),ve.removeResizeHandler(o))})):(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),a.removeClass("ui-media-player-full-screen"))}function W(e){var t,n=he(e);0==n.length||(t=n.data("UIMediaPlayerProgressHint"))&&t.close()}function L(e,t,n){var i=n.offset(),r=i.left,a=i.top;return r<=e&&a<=t&&e<r+n.outerWidth()&&t<a+n.outerHeight()}var j={update:E,destroy:function(){S&&S.destroy(),ve.removeResizeHandler(a),c.unbindEventsHandler(T),a.off(),a.remove(),t.removeData("UIMediaPlayer"),delete t[0].uiInterface}};return t.data("UIMediaPlayer",j),t[0].uiInterface=j},ve.fn.WaveSurfer=function(e){var t=he(this),n=t.data("UIWaveSurfer");if(n)return e&&n.update(e),n;pe();var u,M=e.player,o=!0,c=55,s="#4fcb1d",z="#8b8b8b",l=2,d=28,f=!0,h=!1,v=0,p=0,g=0,m=!0,w=!1,r=!1,y=null,a=!1,b=null,i=null,P=he('<div class="ui-wavesurfer ui-stuff ui-non-selectable">\t<div class="ui-wavesurfer-top-panel">\t\t<div class="ui-wavesurfer-top-panel-selected-range-box">\t\t\t<div class="ui-wavesurfer-selection-values"></div>\t\t\t<div class="ui-wavesurfer-top-panel-selected-range-box-label">0:00 - 0:01 (0:01)</div>\t\t\t<div class="ui-wavesurfer-top-panel-selected-range-box-clear-button">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\t\t\t</div>\t\t</div>\t\t<div class="ui-wavesurfer-top-panel-current-time">0:00</div>\t</div>\t<div class="ui-wavesurfer-scroll-box">\t\t<div class="ui-wavesurfer-content">\t\t\t<div class="ui-wavesurfer-section-new">\t\t\t\t<div class="ui-wavesurfer-selection"></div>\t\t\t\t<div class="ui-wavesurfer-wave-frame">\t\t\t\t\t<div class="ui-wavesurfer-wave-frame-queued"><canvas></canvas></div>\t\t\t\t\t<div class="ui-wavesurfer-wave-frame-passed"><canvas></canvas></div>\t\t\t\t</div>\t\t\t\t<div class="ui-wavesurfer-progress-line"></div>\t\t\t</div>'+(w?'\t\t\t<div class="ui-wavesurfer-section-old">\t\t\t\t<div class="ui-wavesurfer-wave-queued-old"><canvas></canvas></div>\t\t\t\t<div class="ui-wavesurfer-wave-passed-old"><canvas></canvas></div>\t\t\t</div>':"")+'\t\t</div>\t</div>\t<div class="ui-wavesurfer-navigation-panel ui-non-selectable">\t\t<div class="ui-wavesurfer-left-panel">\t\t\t<div class="ui-wavesurfer-play-button ui-wavesurfer-navigation-button">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\t\t\t</div>\t\t\t<div class="ui-wavesurfer-pause-button ui-wavesurfer-navigation-button">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\t\t\t</div>\t\t\t<div class="ui-wavesurfer-zoom-in-button ui-wavesurfer-navigation-button">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path fill="none" d="M0 0h24v24H0V0z"/><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/></svg>\t\t\t</div>\t\t\t<div class="ui-wavesurfer-zoom-out-button ui-wavesurfer-navigation-button">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"/></svg>\t\t\t</div>\t\t</div>\t\t<div class="ui-wavesurfer-scroll-panel">\t\t\t<div class="ui-wavesurfer-scroll-left-button ui-wavesurfer-navigation-button">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>\t\t\t</div>\t\t\t<div class="ui-wavesurfer-scroll-rail-container">\t\t\t\t<div class="ui-wavesurfer-scroll-rail-selection"></div>\t\t\t\t<div class="ui-wavesurfer-scroll-rail-current-position"></div>\t\t\t\t<div class="ui-wavesurfer-scroll-rail-image"></div>\t\t\t\t<div class="ui-wavesurfer-scroll-rail"></div>\t\t\t\t<div class="ui-wavesurfer-scroll-bar">\t\t\t\t\t<div class="ui-wavesurfer-scroll-bar-image"></div>\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="ui-wavesurfer-scroll-right-button ui-wavesurfer-navigation-button">\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>\t\t\t</div>\t\t</div>\t</div></div>');t.append(P);var C,x,S,I,D=P.find(".ui-wavesurfer-progress-line"),O=P.find(".ui-wavesurfer-scroll-box"),E=P.find(".ui-wavesurfer-content"),q=P.find(".ui-wavesurfer-scroll-rail"),T=P.find(".ui-wavesurfer-scroll-bar"),H=P.find(".ui-wavesurfer-zoom-in-button"),B=P.find(".ui-wavesurfer-zoom-out-button"),k=P.find(".ui-wavesurfer-scroll-left-button"),V=P.find(".ui-wavesurfer-scroll-right-button"),A=P.find(".ui-wavesurfer-scroll-rail-current-position"),R=P.find(".ui-wavesurfer-scroll-rail-selection"),F=(C=P.find(".ui-wavesurfer-wave-frame"),x=P.find(".ui-wavesurfer-wave-frame-queued canvas")[0],S=P.find(".ui-wavesurfer-wave-frame-passed canvas")[0],I=P.find(".ui-wavesurfer-wave-frame-passed"),{rebuild:W,updatePosition:function(){var e=ve.toInt(C.css("left")),t=C.outerWidth(),n=O[0].clientWidth,i=O.scrollLeft();(i<e||e+t<i+n)&&(W(),e=ve.toInt(C.css("left")));var r=O[0].scrollWidth,a=M.getDuration(),o=0<a?r*M.getPosition()/a:0;0==a?I.css("width",D.css("left")):e<=o&&o<e+t?I.css("width",o-e+"px"):o<e?I.css("width","0"):I.css("width","100%")}});function W(){var e=O[0].clientWidth,t=2*e;C.outerWidth(t);var n=O.scrollLeft(),i=O[0].scrollWidth,r=n-e/2,r=ve.ensureRange(r,0,i-t);C.css("left",r+"px");var a=M.getStretchedData(i,10,0,r,t),o=null;1<u&&(o=M.getStretchedData(i,10,1,r,t)),b&&0==a.length&&(a=ce(i,1,0,r,t),1<u&&(o=ce(i,1,1,r,t))),re(x,t,a,o,z,r,f&&0<M.getDuration()),re(S,t,a,o,s,r,!1)}var L,j,U,N=w?(L=P.find(".ui-wavesurfer-wave-passed-old"),j=P.find(".ui-wavesurfer-wave-passed-old canvas")[0],U=P.find(".ui-wavesurfer-wave-queued-old canvas")[0],{rebuild:function(){var e=E.outerWidth(),t=M.getStretchedData(e,10,0),n=null;1<u&&(n=M.getStretchedData(e,10,1)),re(U,e,t,n,z,0,f),re(j,e,t,n,s,0,!1)},updatePosition:function(){var e=M.getDuration(),t=0<e?100*M.getPosition()/e:0;L.css("width",t+"%")}}):null,_=P.find(".ui-wavesurfer-selection"),Q=P.find(".ui-wavesurfer-top-panel-current-time"),X=P.find(".ui-wavesurfer-top-panel-selected-range-box"),G=P.find(".ui-wavesurfer-top-panel-selected-range-box-label"),Y=P.find(".ui-wavesurfer-selection-values"),$=0;function Z(){var e=M.getDuration(),t=0<e?O[0].scrollWidth*M.getPosition()/e:0,n=O.scrollLeft(),i=O[0].clientWidth;return n<=t&&t<n+i}ee(e),M.initPlugin({vis:!0}),M.bindEventsHandler(K),ve.addResizeHandler(P,ne),P.on("mousedown touchstart",".ui-wavesurfer-content",function(e){var r,a,n,o,s,l,i;function u(e){var t;i?(n=ve.ensureRange((e.pageX-E.offset().left)/E.outerWidth()*r,0,r),p=0<l?(t=E.offset().top,e.pageY>=t&&e.pageY<t+E.outerHeight()?(v=ve.ensureRange(n-a,0,r-l))+l:v=0):(v=Math.min(a,n),Math.max(a,n)),se(),ie(),ve.isFunction(y)&&y({startTime:v,endTime:p})):(8<Math.abs(e.pageX-o)||8<Math.abs(e.pageY-s))&&(i=!0)}!h||0!=(r=M.getDuration())&&(l=0,i=!1,ve.dragAndDrop({event:e,owner:this,cursor:he(this).css("cursor"),startDragging:function(e){var t=v/r*E.outerWidth(),n=p/r*E.outerWidth(),i=e.pageX-E.offset().left;Math.abs(n-i)<=24?a=v:Math.abs(t-i)<=24?a=p:t<i&&i<n?(a=ve.ensureRange(i/E.outerWidth()*r,0,r)-v,l=p-v):a=ve.ensureRange(i/E.outerWidth()*r,0,r),o=e.pageX,s=e.pageY,u(e)},processDragging:u,stopDragging:function(){i||M.seek(o-E.offset().left,E.outerWidth())}}))}),P.on("mousemove",".ui-wavesurfer-content",function(e){var t,n,i,r,a;h&&v!=p&&(t=E.offset().left,n=e.pageX-t,r=(i=_.offset().left-t)+_.outerWidth(),a=Math.abs(i-n)<=24||Math.abs(r-n)<=24,E.css("cursor",a?"ew-resize":"default"))}),P.on("mousedown",".ui-wavesurfer-content",function(e){1!=e.which||h||0==M.getDuration()||M.seek(e.pageX-E.offset().left,E.outerWidth())}),P.on("click",".ui-wavesurfer-play-button",function(){M.play()}),P.on("click",".ui-wavesurfer-pause-button",function(){M.pause()}),P.on("click",".ui-wavesurfer-zoom-in-button",function(){he(this).hasClass("ui-disabled")||(g+=1,ne())}),P.on("click",".ui-wavesurfer-zoom-out-button",function(){he(this).hasClass("ui-disabled")||(--g,ne())}),P.on("click",".ui-wavesurfer-scroll-left-button",function(){O.scrollLeft(O.scrollLeft()-P.width()),ie()}),P.on("click",".ui-wavesurfer-scroll-right-button",function(){O.scrollLeft(O.scrollLeft()+P.width()),ie()}),P.on("mousedown touchstart",".ui-wavesurfer-scroll-rail, .ui-wavesurfer-scroll-bar",function(e){var t,n,i=he(e.target);ve.dragAndDrop({event:e,owner:this,cursor:"pointer",startDragging:function(e){m=!(r=!0),i.hasClass("ui-wavesurfer-scroll-rail")&&(O.scrollLeft((e.pageX-T.outerWidth()/2-q.offset().left)/(q.outerWidth()-T.outerWidth())*(O[0].scrollWidth-O[0].clientWidth)),ie()),t=O.scrollLeft(),n=e.pageX},processDragging:function(e){O.scrollLeft(t+(e.pageX-n)/(q.outerWidth()-T.outerWidth())*(O[0].scrollWidth-O[0].clientWidth)),ie()},stopDragging:function(){r=!1,m=Z()}})}),P.on("click",".ui-wavesurfer-top-panel-selected-range-box-clear-button",function(){p=v=0,se(),ie()});var J={onLoad:function(){g=0,ne(),a&&(b=null,ve.isString(a)?de(a):de(M.getFileName()+".surf"),a=!1)},onVisualDataLoad:function(){b?b=null:ne()},onPause:function(){P.removeClass("ui-wavesurfer-playing"),ue(),i&&(clearInterval(i),i=null)},onPlay:function(){P.addClass("ui-wavesurfer-playing"),i=i||setInterval(ue,50)},onSeek:function(){ue()}};function K(e){var t=J[e.name];ve.isFunction(t)&&t(e)}function ee(e){var t,n,i=!1;(e=ve.toObject(e)).hasOwnProperty("allow2ChannelMode")&&(o=ve.toBoolean(e.allow2ChannelMode),i=!0),e.hasOwnProperty("channelHeight")&&(c=ve.toInt(e.channelHeight),i=!0),e.hasOwnProperty("mainColor")&&(s=ve.trim(e.mainColor),i=!0),e.hasOwnProperty("secondaryColor")&&(z=ve.trim(e.secondaryColor),P.find(".ui-wavesurfer-top-panel-current-time").css("color",z),P.find(".ui-wavesurfer-top-panel-selected-range-box-label").css("color",z),P.find(".ui-wavesurfer-top-panel-selected-range-box-clear-button svg").css("fill",z),P.find(".ui-wavesurfer-scroll-rail-image").css("background-color",z),P.find(".ui-wavesurfer-scroll-bar-image").css("background-color",z),A.css("background-color",z),P.findAll(".ui-wavesurfer-navigation-panel svg").each(function(){he(this).css("fill",z)}),i=!0),e.hasOwnProperty("splitterSize")&&(l=ve.toInt(e.splitterSize),i=!0),e.hasOwnProperty("showRuler")&&(f=ve.toBoolean(e.showRuler),i=!0),e.hasOwnProperty("showNavigation")&&P.toggleClass("ui-wavesurfer-without-navigation",!ve.toBoolean(e.showNavigation)),e.hasOwnProperty("selectionEnabled")&&(h=ve.toBoolean(e.selectionEnabled),P.toggleClass("ui-wavesurfer-with-selection",h),i=!0),e.hasOwnProperty("selectionStartTime")&&(v=te(e.selectionStartTime),i=!0),e.hasOwnProperty("selectionEndTime")&&(p=te(e.selectionEndTime),i=!0),e.hasOwnProperty("onSelectionChange")&&(y=e.onSelectionChange),e.hasOwnProperty("selectionColor1")&&(t=e.selectionColor1,_.css("background-color",t),R.css("background-color",t)),e.hasOwnProperty("selectionColor2")&&(n=e.selectionColor2,_.css("border-color",n),R.css("border-color",n)),e.hasOwnProperty("hidePlayButton")&&P.toggleClass("ui-wavesurfer-without-play-button",ve.toBoolean(e.hidePlayButton)),e.hasOwnProperty("cachedWave")&&(a=ve.toBoolean(e.cachedWave)),e.hasOwnProperty("cachedWaveURL")&&(a=ve.trim(e.cachedWaveURL)),i&&ne()}function te(e){if(ve.isString(e)&&-1<e.indexOf(":")){var t=e.split(":");if(2==t.length)return 60*ve.toInt(t[0])+ve.toFloat(t[1]);if(3==t.length)return 3600*ve.toInt(t[0])*ve.toInt(t[1])*60+ve.toFloat(t[2])}return ve.toFloat(e)}function ne(){var e=M.getNumberOfChannels(),t=o&&2==e;0==e&&b&&(t=2==b.channelsCount),u=t?2:1;var n=O[0].clientWidth,i=n*Math.pow(2,g);E.outerWidth(i);var r=c*u;D.css({width:l+"px",height:r+"px","background-color":s}),_.css({height:r+"px"});var a=n/i*M.getDuration();H.toggleClass("ui-disabled",a<30),B.toggleClass("ui-disabled",g<=0),P.toggleClass("ui-wavesurfer-with-scroll-panel",0<g),F.rebuild(),w&&N.rebuild(),se(),ie()}function ie(){var e,t,n=O.scrollLeft(),i=O[0].scrollWidth,r=O[0].clientWidth;!m||(n+r<=(t=0<(e=M.getDuration())?O[0].scrollWidth*M.getPosition()/e:0)||t<n)&&(O.scrollLeft(t),n=O.scrollLeft()),F.updatePosition(),w&&N.updatePosition();var a=q.outerWidth()*r/i,o=q.outerWidth()*n/i;T.css({left:o+"px",width:a+"px"}),k.toggleClass("ui-disabled",n<=0),V.toggleClass("ui-disabled",i-r<=n),le()}function re(e,t,n,i,r,a,o){e.width=t,e.height=c*u+(o?d:0);var s=ve.initGraph(e),l=s.ctx;l.clearRect(0,0,s.width,s.height),1<u?(ae(s,n,t,0,r),ae(s,i,t,c,r),o&&oe(l,a,t,2*c)):(ae(s,n,t,0,r),o&&oe(l,a,t,c))}function ae(e,t,n,i,r){var a=c/2;i+=a;var o,s,l=e.webColor2RGB(r);if(0<t.length)for(o=0,s=Math.min(n,t.length);o<s;o++)e.line(o,i+t.loData[o]*a,o,i+t.hiData[o]*a,l);else for(ve.srand(0),o=0,s=n;o<s;o++){var u=ve.rand()/ve.randMax*2,d=ve.rand()/ve.randMax*2;e.line(o,i-u,o,i+d,l)}e.redraw()}function oe(r,a,e,t){var o=M.getDuration();if(0!=o){r.beginPath(),r.font="10px Arial",r.strokeStyle=z,r.fillStyle=z;var s=t+8,n=s+16;r.fillText("0",-a,n);var i=O[0].scrollWidth,l=x(o),u=r.measureText(l).width;r.fillText(l,i-2-u-a,n);for(var d,c,f=[1,5,10,15,20,30,60],h=0;d=f[h%f.length],!(2*u<(c=(i-1)*(d*=Math.pow(60,Math.floor(h/f.length)))/o));)h++;var v=0,p=0,g=i-2*u;for(e=e||g;p<g;){if(a<=p&&p<=a+e){C(p,-6,6);for(var m,w,y=1;y<10;y++)y%5==0?C(p+c*y/10,-4,4):C(p+c*y/10,-1,1);0==p?r.fillText("0",0,n):(m=x(v),w=r.measureText(m).width,r.fillText(m,p-w/2-a,n))}v+=d,p+=c}if(a<=p&&p<=a+e)if(p<i-1)for(var b=0,P=c/10;;){if(i-1<=p+P){C(p,-6,6);break}b%5==0?C(p,-4,4):C(p,-1,1),p+=P,b++,v+=d}else C(i-2,-6,6);r.stroke()}function C(e,t,n){var i=e+1-a;r.moveTo(i,s+t),r.lineTo(i,s+n)}function x(e){var t=Math.floor(e),n=t%60,i=(t=Math.floor(t/60))%60;return t=Math.floor(t/60),3600<=o?t+":"+ve.format2Digit(i)+":"+ve.format2Digit(n):i+":"+ve.format2Digit(n)}}function se(){var e=M.getDuration(),t=E.outerWidth(),n=v/e*t,i=p/e*t-n;_.css({display:v!=p&&h?"block":"none",left:n+"px"}),_.outerWidth(i),G.text(M.formatTime(v)+" - "+M.formatTime(p)+" ("+M.formatTime(p-v)+")"),Y.text(v+"|"+p)}function le(){var e,t,n=M.getPosition(),i=M.getDuration(),r=O.scrollLeft(),a=P.outerWidth(),o=0,s=0,l=!1;v<p&&h?(X.show(),s=X.outerWidth(),o=(v+(p-v)/2)/i*E.outerWidth()-s/2-r,o=ve.ensureRange(o,0,a-s),l=0<=(e=_.offset().left-P.offset().left)+_.outerWidth()&&e<a,X.css({display:l?"block":"none",left:Math.floor(o)+"px"}),t=q.outerWidth(),R.css({display:"block",left:v/i*t+"px",width:(p-v)/i*t+"px"})):(X.css({display:"",left:""}),R.css({display:"none",left:"",width:""}));var u=Q.outerWidth(),d=0<i?n/i*E.outerWidth()-u/2-r:0;d=ve.ensureRange(d,0,a);var c=1;l&&ve.toInt(o<d+u+8)-ve.toInt(d<o+s+3)==0&&(c=-12,0<d&&a-u-2<=(d+=u/2+4)&&(d-=u+8)),d=ve.ensureRange(d,0,a-u-1),Q.css({left:Math.floor(d)+"px",bottom:c+"px"})}function ue(){var e,t=M.getDuration();0<t?e=100*M.getPosition()/t:(e=$,100<($+=.5)&&($=0)),D.css("left",e+"%"),A.css("left",e+"%"),Q.text(M.getPositionStr()),le(),ie(),!r&&Z()&&(m=!0)}function de(e){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){function e(e){for(var t=[],n=0;n<e;n++)t.push((r.readNumber(6)-32)/31);return t}var t,n,i,r;t=a.response,"Media Engine Wavesurfer Cache\n"==(r=ve.BinaryReader(t)).readString(30)?(n=r.readNumber(32),i=r.readNumber(8),b={length:n,channelsCount:i,loData0:e(n),hiData0:e(n)},1<i&&(b.loData1=e(n),b.hiData1=e(n)),ne()):console.error("Invalid wavesurfer cache file")},a.send()}function ce(e,t,n,i,r){(!r||e<r)&&(r=e),(i=ve.toInt(i))<0&&(i=0),e<i+r&&(i-=e-r);for(var a=0==(n=ve.ensureRange(n,0,M.getNumberOfChannels()-1))?b.hiData0:b.hiData1,o=0==n?b.loData0:b.loData1,s=[],l=[],u=0,d=0;d<r;d++){for(var c=0,f=0,h=Math.floor((d+i)*b.length/e),v=0;v<t;v++){var p=Math.floor(u+(h-u)*v/t),g=a[p];f<g&&(f=g);var m=o[p];m<c&&(c=m)}u=h,s.push(f),l.push(c)}return{length:e,hiData:s,loData:l}}var fe={update:ee,destroy:function(){M.unbindEventsHandler(K),ve.removeResizeHandler(P),P.off(),P.remove(),t.removeData("UIWaveSurfer"),delete t[0].uiInterface}};return t.data("UIWaveSurfer",fe),t[0].uiInterface=fe},ve.generateWaveSurferCacheForAudioFile=function(){ve.showFileDialog({accept:["audio/mp3","video/mp4"]},function(t){ve.screenLocker.show();var s=ve.MediaEngine();function n(){var e=function(){var e=Math.floor(2560*s.getDuration()/30),t=s.getNumberOfChannels(),n=s.getStretchedData(e,10,0),i=n.length;if(0==i)return null;var r,a=ve.BinaryWriter();function o(e){for(var t=0;t<i;t++)a.writeNumber(31*e[t]+32,6)}return a.writeString("Media Engine Wavesurfer Cache\n"),a.writeNumber(i,32),a.writeNumber(t,8),o(n.loData),o(n.hiData),1<t&&(o((r=s.getStretchedData(e,10,1)).loData),o(r.hiData)),a.getData()}();e&&ve.download(e,t.name+".surf","application/octet-stream")}s.initPlugin({vis:!0}),s.setAutoplay(!1),s.bindEventsHandler(function e(t){"onVisualDataLoad"==t.name&&(ve.screenLocker.hide(),n(),setTimeout(function(){s.unbindEventsHandler(e),s.destroy()},100))}),s.renderFileVariable(t)})},ve.fn.Waveform=function(e){var t=he(this),n=t.data("UIWaveform");if(n)return n.update(e),n;pe();var r=e.player;r?(r.initPlugin({dsp:!0,vis:!0}),r.bindEventsHandler(p)):A.bindEventsHandler(p);var i=he('<div class="ui-waveform ui-stuff">\t<div class="ui-waveform-box">\t\t<canvas class="ui-waveform-canvas" width="0" height="64"></canvas>\t</div></div>');t.prepend(i);var a=i.find(".ui-waveform-box"),o=i.find(".ui-waveform-canvas")[0],s=o.getContext("2d"),l=null,u="#000000",d=!1,c=!1,f=0,h=!0;y(e),d&&g();var v={onPause:function(){d||m()},onPlay:function(){g()}};function p(e){var t=v[e.name];ve.isFunction(t)&&t(e)}function g(){l||(i.addClass("ui-waveform-playing"),w(),l=setInterval(w,20))}function m(){l&&(i.removeClass("ui-waveform-playing"),clearInterval(l),l=null)}function w(){o.width=o.parentNode.offsetWidth;var e=A.getVisualData(r,o.width,0,!1),t=Math.floor(o.height/2);s.clearRect(0,0,o.width,o.height),s.beginPath();for(var n=0;n<o.width;n++){var i=t+e[n]*t;0==n?s.moveTo(n,i):s.lineTo(n,i)}s.strokeStyle=u,s.stroke()}function y(e){var t,n=!1;(e=ve.toObject(e)).hasOwnProperty("color")&&(u=ve.trim(e.color)),e.hasOwnProperty("opacity")&&i.css("opacity",ve.toFloat(e.opacity)),e.hasOwnProperty("height")&&(o.height=ve.toInt(e.height)),e.hasOwnProperty("ghostMode")&&(c=ve.toBoolean(e.ghostMode),n=!0),e.hasOwnProperty("ghostTop")&&(f=ve.toInt(e.ghostTop),n=!0),e.hasOwnProperty("forceDraw")&&(d=ve.toBoolean(e.forceDraw),i.toggleClass("ui-waveform-force-draw",d)),e.hasOwnProperty("visible")&&(t=ve.toBoolean(e.visible),h!=t&&(h=ve.toBoolean(e.visible),i.toggleClass("ui-waveform-invisible",!h),h&&!r.isPaused()?g():d||m())),n&&(i.toggleClass("ui-waveform-ghost-mode",c),a.css("padding-top",c?f+"px":""))}var b={update:y,destroy:function(){r?r.unbindEventsHandler(p):A.unbindEventsHandler(p),m(),i.remove(),t.removeData("UIWaveform"),delete t[0].uiInterface}};return t.data("UIWaveform",b),t[0].uiInterface=b},ve.fn.CircularSpectrum=function(e){var t=he(this);if(0==t.length)return console.error("Circular spectrum component has invalid owner",this),{};var n=t.data("UICircularSpectrum");if(n)return n.update(e),n;pe();var i=null,c=e.player||t.data("_uiMediaEnginePlayerInterface"),r=he('<div class="ui-circular-spectrum">\t<canvas class="ui-circular-spectrum-canvas"></canvas></div>');t.append(r);var a=t.css("position");"absolute"!=a&&"fixed"!=a&&t.addClass("ui-circular-spectrum-relative-owner");var f=r.find(".ui-circular-spectrum-canvas")[0],h=f.getContext("2d"),v=150,p=110,g=64,m=.7,w=1,y="#9f9f9f",b=6,P=!1,C=.15,x="#e2e2e2",M=[],z=[];c?(c.initPlugin({dsp:!0,vis:!0}),c.bindEventsHandler(s)):A.bindEventsHandler(s);var o={onPause:function(){l()},onPlay:function(){!function(){if(i)return;d(),i=setInterval(d,20)}()}};function s(e){var t=o[e.name];ve.isFunction(t)&&t(e)}function l(){i&&(clearInterval(i),i=null)}function u(e){var t=!1;(e=ve.toObject(e)).hasOwnProperty("outerSize")&&(v=ve.toInt(e.outerSize),t=!0),e.hasOwnProperty("innerSize")&&(p=ve.toInt(e.innerSize),t=!0),e.hasOwnProperty("barCount")&&(g=ve.toInt(e.barCount),t=!0),e.hasOwnProperty("barSize")&&(m=ve.toFloat(e.barSize),t=!0),e.hasOwnProperty("barSpeed")&&(w=ve.toFloat(e.barSpeed),t=!0),e.hasOwnProperty("barColor")&&(y=ve.toString(e.barColor),t=!0),e.hasOwnProperty("multiplier")&&(b=ve.toFloat(e.multiplier),t=!0),e.hasOwnProperty("showPeaks")&&(P=ve.toBoolean(e.showPeaks),t=!0),e.hasOwnProperty("peakSpeed")&&(C=ve.toFloat(e.peakSpeed),t=!0),e.hasOwnProperty("peakColor")&&(x=ve.toString(e.peakColor),t=!0),e.hasOwnProperty("opacity")&&r.css("opacity",ve.toFloat(e.opacity)),t&&(r.css({"margin-left":-v/2+"px","margin-top":-v/2+"px",width:v+"px",height:v+"px"}),f.width=v,f.height=v,i&&d())}function S(e,t){if(t>=e.length)for(var n=t-e.length,i=0;i<n;i++)e.push(0);else e.length=t}function I(e,t,n){for(var i=0;i<e.length;i++)e[i]-=n,t[i]>e[i]&&(e[i]=t[i]),e[i]<0&&(e[i]=0)}function d(){var e,t=v/2,n=p/2,i=(v-p)/2*b,r=A.getSpectrumData(c,g,0,!1);M.length!=r.length&&(e=r.length,S(M,e),S(z,e)),I(M,r,w),I(z,r,C),h.clearRect(0,0,f.width,f.height),h.strokeStyle=x,h.fillStyle=y;for(var a=0;a<g;a++){var o,s=a/g*2*Math.PI-Math.PI,l=s-Math.PI/g*m,u=s+Math.PI/g*m,d=n+Math.sqrt(M[a]*i);h.beginPath(),h.moveTo(t+n*Math.cos(l),t+n*Math.sin(l)),h.lineTo(t+d*Math.cos(l),t+d*Math.sin(l)),h.lineTo(t+d*Math.cos(u),t+d*Math.sin(u)),h.lineTo(t+n*Math.cos(u),t+n*Math.sin(u)),h.closePath(),h.fill(),P&&(o=n+Math.sqrt(z[a]*i),h.beginPath(),h.moveTo(t+o*Math.cos(l),t+o*Math.sin(l)),h.lineTo(t+o*Math.cos(u),t+o*Math.sin(u)),h.stroke())}}u(e);var D={update:u,destroy:function(){c?c.unbindEventsHandler(s):A.unbindEventsHandler(s),l(),r.remove(),t.removeClass("ui-circular-spectrum-relative-owner"),t.removeData("UICircularSpectrum"),delete t[0].uiInterface}};return t.data("UICircularSpectrum",D),t[0].uiInterface=D},ve.fn.PlayButton=function(e){var t=he(this),n=t.data("UIPlayButton");if(n)return n.update(e),n;pe();var i=he('<div class="ui-play-button ui-stuff ui-non-selectable">\t<div class="ui-play-button-icon-area">\t\t<div class="ui-play-button-play-icon">\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7.1,5.9v12.2c0,0.9,1,1.5,1.8,1l9.6-6.1c0.7-0.5,0.7-1.5,0-2L8.9,4.9C8.1,4.4,7.1,5,7.1,5.9z"/></svg>\t\t</div>\t\t<div class="ui-play-button-pause-icon">\t\t\t<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7,19h2c0.6,0,1-0.4,1-1V6c0-0.6-0.4-1-1-1H7C6.4,5,6,5.4,6,6v12C6,18.6,6.4,19,7,19z M14,6v12c0,0.6,0.4,1,1,1h2c0.6,0,1-0.4,1-1V6c0-0.6-0.4-1-1-1h-2C14.4,5,14,5.4,14,6z"/></svg>\t\t</div>\t</div></div>');t.append(i);var r=i.find(".ui-play-button-icon-area"),a=i.find(".ui-play-button-play-icon svg"),o=i.find(".ui-play-button-pause-icon svg"),s=24,l=24,u="#00000",d=u,c=e.player,f={onPause:function(){i.removeClass("ui-play-button-playing")},onPlay:function(){i.addClass("ui-play-button-playing")}};function h(e){var t=f[e.name];ve.isFunction(t)&&t(e)}function v(e){var t=!1;(e=ve.toObject(e)).hasOwnProperty("size")&&(s=ve.toInt(e.size),t=!0),e.hasOwnProperty("outerSize")&&(l=ve.toInt(e.outerSize),t=!0),e.hasOwnProperty("color")&&(u=ve.trim(e.color),d=u,r.css("color",u),a.attr("fill",u),o.attr("fill",u)),e.hasOwnProperty("hoverColor")&&(d=ve.trim(e.hoverColor)),e.hasOwnProperty("hoverDuration")&&r.css("transition","color "+ve.toInt(e.hoverDuration)+"ms linear"),e.hasOwnProperty("id")&&i.attr("id",ve.trim(e.id)),t&&function(){var e=(l-s)/2;e<0&&(e=0);i.css({width:l+"px",height:l+"px"}),r.css({left:e+"px",top:e+"px"}),a.attr("width",s),a.attr("height",s),o.attr("width",s),o.attr("height",s)}()}c.bindEventsHandler(h),v(e),i.on("click",function(){c.isPaused()?c.play():c.pause()}),i.on("mouseenter",function(){d!=u&&r.css("color",d)}),i.on("mouseleave",function(){d!=u&&r.css("color",u)});var p={update:v,destroy:function(){c.unbindEventsHandler(h),i.remove(),t.removeData("UIPlayButton"),delete t[0].uiInterface}};return t.data("UIPlayButton",p),t[0].uiInterface=p,i.data("_uiMediaEnginePlayerInterface",c),p},(O=U={}).c=function(){if(window.MEDIA_ENGINE_DOMAIN!=location.hostname)return!!O.licensed;for(var e,t,n="ABCDEFGHIJKLMNOPQRSTUVWXYZ123456",i=[],r=0;r<5;r++)i.push(w._rand());for(r=0;r<100;r++){var a=i[0];i[0]=i[1]^a,i[1]=i[2]^w._rand(),i[2]=i[3],i[3]=i[4]^a,i[4]=location.hostname.charCodeAt(r%location.hostname.length)}var o=ve.BinaryWriter();for(r=0;r<5;r++)o.writeNumber(i[r],31);e=o.getData();var s=[];for(r=0;r<n.length;r++)s[n[r]]=r;for(o=ve.BinaryWriter(),r=0;r<window.MEDIA_ENGINE_KEY.length;r++){var l=window.MEDIA_ENGINE_KEY[r];s.hasOwnProperty(l)&&o.writeNumber(s[l],5)}for(t=o.getData(),O.licensed=1,r=0;r<12;r++)O.licensed&=!(e[r]^t[r]);return delete window.MEDIA_ENGINE_DOMAIN,delete window.MEDIA_ENGINE_KEY,O.licensed},-1!=location.href.indexOf(location.hostname)&&(ve.fn.Equalizer=function(e){var t=he(this),n=t.data("UIEqualizer");if(n||!U.c())return ve.isObject(n)&&n.update(e),n;pe();var a=(e=ve.toObject(e)).player;if(!a)return console.error("Equalizer should be connected to some player"),{};a.initPlugin({dsp:!0,vis:!0});var o=he('<div class="ui-equalizer ui-stuff ui-non-selectable">\t<div class="ui-equalizer-main-panel">\t\t<div class="ui-equalizer-top-panel">\t\t\t<div class="ui-equalizer-visualization-panel"></div>\t\t\t<div class="ui-equalizer-vu-meters">\t\t\t\t<div class="ui-equalizer-vu-in"></div>\t\t\t\t<div class="ui-equalizer-vu-out"></div>\t\t\t</div>\t\t</div>\t\t<div class="ui-equalizer-geq-panel"></div>\t\t<div class="ui-equalizer-eq-graph-panel"></div>\t</div>\t<div class="ui-equalizer-params-panel">\t\t<div class="ui-equalizer-balance-slider"></div>\t\t<div class="ui-equalizer-lowpass-slider"></div>\t\t<div class="ui-equalizer-highpass-slider"></div>\t\t<div class="ui-equalizer-3d-slider"></div>\t</div></div>');U.c()&&t.append(o);var i=ie(o.find(".ui-equalizer-vu-in"),{player:a,title:"IN",applyDSP:!1}),r=ie(o.find(".ui-equalizer-vu-out"),{player:a,title:"OUT",applyDSP:!0}),s=se(o.find(".ui-equalizer-visualization-panel"),a),l=le(o.find(".ui-equalizer-balance-slider"),{player:a,label:"Balance",value:a.dsp.balance.getValue(),minValue:-1,maxValue:1,formatHandler:function(e){var t=e.toFixed(2);return"0.00"!=t&&0<e?"+"+t:t},onChange:function(e){a&&a.dsp.balance.setValue(e.value)}}),u=le(o.find(".ui-equalizer-lowpass-slider"),{player:a,label:"Lowpass",value:1-a.dsp.lowpass.getValue(),minValue:0,maxValue:1,onChange:function(e){a&&a.dsp.lowpass.setValue(1-e.value)}}),d=le(o.find(".ui-equalizer-highpass-slider"),{player:a,label:"Highpass",value:a.dsp.highpass.getValue(),minValue:0,maxValue:1,onChange:function(e){a&&a.dsp.highpass.setValue(e.value)}}),c=le(o.find(".ui-equalizer-3d-slider"),{player:a,label:"3D",value:a.dsp.sound3d.getValue(),minValue:0,maxValue:1,onChange:function(e){a&&a.dsp.sound3d.setValue(e.value)}}),f=de(o.find(".ui-equalizer-geq-panel"),a),h=ce(o.find(".ui-equalizer-eq-graph-panel"),{player:a,onGetPoints:function(e,t){var n=[];n.push({x:0,y:t/2});for(var i=0;i<10;i++){var r=f.bandOffsX(i)-o.offset().left;n.push({x:r,y:t-(a.dsp.equalizer.getEQBand(i)+20)/40*(t-24)-12})}return n.push({x:e,y:t/2}),n}});g(e),setInterval(function(){i.drawFrame(),r.drawFrame()},20),m(),ve.addResizeHandler(o,m);var v={PreampChanged:f.preampChanged,EQBandChanged:function(){f.eqBandChanged(),h.drawGraph()},BalanceChanged:function(){l.update({value:a.dsp.balance.getValue()})},LowpassChanged:function(){u.update({value:1-a.dsp.lowpass.getValue()})},HighpassChanged:function(){d.update({value:a.dsp.highpass.getValue()})},Sound3DChanged:function(){c.update({value:a.dsp.sound3d.getValue()})}};function p(e){var t=v[e.name];ve.isFunction(t)&&t(e)}function g(e){var t,n;(e=ve.toObject(e)).hasOwnProperty("color")&&(t=ve.trim(e.color),n={color:t},l.update(n),u.update(n),d.update(n),c.update(n),f.update({color:t})),e.hasOwnProperty("visType")&&s.setVisType(e.visType),e.hasOwnProperty("onSelectVis")&&s.setVisChangeHandler(e.onSelectVis)}function m(){o.removeClass("ui-m1"),o.removeClass("ui-m2");var e=o.outerWidth();e<580&&o.addClass("ui-m1"),e<380&&o.addClass("ui-m2"),h.adjust()}a.bindEventsHandler(p),o.on("uiScroll",function(){h.drawGraph()});var w={update:g,destroy:function(){f.destroy(),h.destroy(),l.destroy(),u.destroy(),d.destroy(),c.destroy(),ve.removeResizeHandler(o),a.unbindEventsHandler(p),o.remove(),t.removeData("UIEqualizer"),delete t[0].uiInterface}};return t.data("UIEqualizer",w),t[0].uiInterface=w},(E=window.jQuery)&&(E.fn.UIMediaPlayer=ve.fn.MediaPlayer,E.fn.UIWaveSurfer=ve.fn.WaveSurfer,E.fn.UIWaveform=ve.fn.Waveform,E.fn.UICircularSpectrum=ve.fn.CircularSpectrum,E.fn.UIPlayButton=ve.fn.PlayButton,E.fn.UIEqualizer=ve.fn.Equalizer,E.fn.MulberryPlayer=ve.fn.MulberryPlayer,E.showFileDialog=ve.showFileDialog,E.generateWaveSurferCacheForAudioFile=ve.generateWaveSurferCacheForAudioFile),P.mediaEngineAbout=function(){alert("Media Engine 1.20\nAuthor: Alex Zhyrytovskyi\n2019-2020")},P.mediaEngineVersion=function(){return q}))}(window);